this.hsWidget=(()=>{var inProgress,__webpack_modules__={772:(module,__unused_webpack_exports,__webpack_require__)=>{var Vnode=__webpack_require__(241);module.exports=function(render,schedule,console){var subscriptions=[],rendering=!1,pending=!1;function sync(){if(rendering)throw new Error("Nested m.redraw.sync() call");rendering=!0;for(var i=0;i<subscriptions.length;i+=2)try{render(subscriptions[i],Vnode(subscriptions[i+1]),redraw)}catch(e){console.error(e)}rendering=!1}function redraw(){pending||(pending=!0,schedule((function(){pending=!1,sync()})))}return redraw.sync=sync,{mount:function(root,component){if(null!=component&&null==component.view&&"function"!=typeof component)throw new TypeError("m.mount(element, component) expects a component, not a vnode");var index=subscriptions.indexOf(root);index>=0&&(subscriptions.splice(index,2),render(root,[],redraw)),null!=component&&(subscriptions.push(root,component),render(root,Vnode(component),redraw))},redraw}}},140:(module,__unused_webpack_exports,__webpack_require__)=>{var Vnode=__webpack_require__(241),m=__webpack_require__(609),Promise=__webpack_require__(629),buildPathname=__webpack_require__(16),parsePathname=__webpack_require__(794),compileTemplate=__webpack_require__(857),assign=__webpack_require__(511),sentinel={};module.exports=function($window,mountRedraw){var fireAsync;function setPath(path,data,options){if(path=buildPathname(path,data),null!=fireAsync){fireAsync();var state=options?options.state:null,title=options?options.title:null;options&&options.replace?$window.history.replaceState(state,title,route.prefix+path):$window.history.pushState(state,title,route.prefix+path)}else $window.location.href=route.prefix+path}var component,attrs,currentPath,lastUpdate,currentResolver=sentinel,SKIP=route.SKIP={};function route(root,defaultRoute,routes){if(null==root)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var onremove,state=0,compiled=Object.keys(routes).map((function(route){if("/"!==route[0])throw new SyntaxError("Routes must start with a `/`");if(/:([^\/\.-]+)(\.{3})?:/.test(route))throw new SyntaxError("Route parameter names must be separated with either `/`, `.`, or `-`");return{route,component:routes[route],check:compileTemplate(route)}})),callAsync="function"==typeof setImmediate?setImmediate:setTimeout,p=Promise.resolve(),scheduled=!1;if(fireAsync=null,null!=defaultRoute){var defaultData=parsePathname(defaultRoute);if(!compiled.some((function(i){return i.check(defaultData)})))throw new ReferenceError("Default route doesn't match any known routes")}function resolveRoute(){scheduled=!1;var prefix=$window.location.hash;"#"!==route.prefix[0]&&(prefix=$window.location.search+prefix,"?"!==route.prefix[0]&&"/"!==(prefix=$window.location.pathname+prefix)[0]&&(prefix="/"+prefix));var path=prefix.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent).slice(route.prefix.length),data=parsePathname(path);function fail(){if(path===defaultRoute)throw new Error("Could not resolve default route "+defaultRoute);setPath(defaultRoute,null,{replace:!0})}assign(data.params,$window.history.state),function loop(i){for(;i<compiled.length;i++)if(compiled[i].check(data)){var payload=compiled[i].component,matchedRoute=compiled[i].route,localComp=payload,update=lastUpdate=function(comp){if(update===lastUpdate){if(comp===SKIP)return loop(i+1);component=null==comp||"function"!=typeof comp.view&&"function"!=typeof comp?"div":comp,attrs=data.params,currentPath=path,lastUpdate=null,currentResolver=payload.render?payload:null,2===state?mountRedraw.redraw():(state=2,mountRedraw.redraw.sync())}};return void(payload.view||"function"==typeof payload?(payload={},update(localComp)):payload.onmatch?p.then((function(){return payload.onmatch(data.params,path,matchedRoute)})).then(update,fail):update("div"))}fail()}(0)}return fireAsync=function(){scheduled||(scheduled=!0,callAsync(resolveRoute))},"function"==typeof $window.history.pushState?(onremove=function(){$window.removeEventListener("popstate",fireAsync,!1)},$window.addEventListener("popstate",fireAsync,!1)):"#"===route.prefix[0]&&(fireAsync=null,onremove=function(){$window.removeEventListener("hashchange",resolveRoute,!1)},$window.addEventListener("hashchange",resolveRoute,!1)),mountRedraw.mount(root,{onbeforeupdate:function(){return!(!(state=state?2:1)||sentinel===currentResolver)},oncreate:resolveRoute,onremove,view:function(){if(state&&sentinel!==currentResolver){var vnode=[Vnode(component,attrs.key,attrs)];return currentResolver&&(vnode=currentResolver.render(vnode[0])),vnode}}})}return route.set=function(path,data,options){null!=lastUpdate&&((options=options||{}).replace=!0),lastUpdate=null,setPath(path,data,options)},route.get=function(){return currentPath},route.prefix="#!",route.Link={view:function(vnode){var onclick,href,options=vnode.attrs.options,attrs={};assign(attrs,vnode.attrs),attrs.selector=attrs.options=attrs.key=attrs.oninit=attrs.oncreate=attrs.onbeforeupdate=attrs.onupdate=attrs.onbeforeremove=attrs.onremove=null;var child=m(vnode.attrs.selector||"a",attrs,vnode.children);return(child.attrs.disabled=Boolean(child.attrs.disabled))?(child.attrs.href=null,child.attrs["aria-disabled"]="true",child.attrs.onclick=null):(onclick=child.attrs.onclick,href=child.attrs.href,child.attrs.href=route.prefix+href,child.attrs.onclick=function(e){var result;"function"==typeof onclick?result=onclick.call(e.currentTarget,e):null==onclick||"object"!=typeof onclick||"function"==typeof onclick.handleEvent&&onclick.handleEvent(e),!1===result||e.defaultPrevented||0!==e.button&&0!==e.which&&1!==e.which||e.currentTarget.target&&"_self"!==e.currentTarget.target||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(e.preventDefault(),e.redraw=!1,route.set(href,null,options))}),child}},route.param=function(key){return attrs&&null!=key?attrs[key]:attrs},route}},878:(module,__unused_webpack_exports,__webpack_require__)=>{var hyperscript=__webpack_require__(609);hyperscript.trust=__webpack_require__(769),hyperscript.fragment=__webpack_require__(27),module.exports=hyperscript},386:(module,__unused_webpack_exports,__webpack_require__)=>{var hyperscript=__webpack_require__(878),request=__webpack_require__(996),mountRedraw=__webpack_require__(367),m=function(){return hyperscript.apply(this,arguments)};m.m=hyperscript,m.trust=hyperscript.trust,m.fragment=hyperscript.fragment,m.mount=mountRedraw.mount,m.route=__webpack_require__(116),m.render=__webpack_require__(759),m.redraw=mountRedraw.redraw,m.request=request.request,m.jsonp=request.jsonp,m.parseQueryString=__webpack_require__(194),m.buildQueryString=__webpack_require__(137),m.parsePathname=__webpack_require__(794),m.buildPathname=__webpack_require__(16),m.vnode=__webpack_require__(241),m.PromisePolyfill=__webpack_require__(252),module.exports=m},367:(module,__unused_webpack_exports,__webpack_require__)=>{var render=__webpack_require__(759);module.exports=__webpack_require__(772)(render,requestAnimationFrame,console)},511:module=>{module.exports=Object.assign||function(target,source){source&&Object.keys(source).forEach((function(key){target[key]=source[key]}))}},16:(module,__unused_webpack_exports,__webpack_require__)=>{var buildQueryString=__webpack_require__(137),assign=__webpack_require__(511);module.exports=function(template,params){if(/:([^\/\.-]+)(\.{3})?:/.test(template))throw new SyntaxError("Template parameter names *must* be separated");if(null==params)return template;var queryIndex=template.indexOf("?"),hashIndex=template.indexOf("#"),queryEnd=hashIndex<0?template.length:hashIndex,pathEnd=queryIndex<0?queryEnd:queryIndex,path=template.slice(0,pathEnd),query={};assign(query,params);var resolved=path.replace(/:([^\/\.-]+)(\.{3})?/g,(function(m,key,variadic){return delete query[key],null==params[key]?m:variadic?params[key]:encodeURIComponent(String(params[key]))})),newQueryIndex=resolved.indexOf("?"),newHashIndex=resolved.indexOf("#"),newQueryEnd=newHashIndex<0?resolved.length:newHashIndex,newPathEnd=newQueryIndex<0?newQueryEnd:newQueryIndex,result=resolved.slice(0,newPathEnd);queryIndex>=0&&(result+=template.slice(queryIndex,queryEnd)),newQueryIndex>=0&&(result+=(queryIndex<0?"?":"&")+resolved.slice(newQueryIndex,newQueryEnd));var querystring=buildQueryString(query);return querystring&&(result+=(queryIndex<0&&newQueryIndex<0?"?":"&")+querystring),hashIndex>=0&&(result+=template.slice(hashIndex)),newHashIndex>=0&&(result+=(hashIndex<0?"":"&")+resolved.slice(newHashIndex)),result}},857:(module,__unused_webpack_exports,__webpack_require__)=>{var parsePathname=__webpack_require__(794);module.exports=function(template){var templateData=parsePathname(template),templateKeys=Object.keys(templateData.params),keys=[],regexp=new RegExp("^"+templateData.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,(function(m,key,extra){return null==key?"\\"+m:(keys.push({k:key,r:"..."===extra}),"..."===extra?"(.*)":"."===extra?"([^/]+)\\.":"([^/]+)"+(extra||""))}))+"$");return function(data){for(var i=0;i<templateKeys.length;i++)if(templateData.params[templateKeys[i]]!==data.params[templateKeys[i]])return!1;if(!keys.length)return regexp.test(data.path);var values=regexp.exec(data.path);if(null==values)return!1;for(i=0;i<keys.length;i++)data.params[keys[i].k]=keys[i].r?values[i+1]:decodeURIComponent(values[i+1]);return!0}}},794:(module,__unused_webpack_exports,__webpack_require__)=>{var parseQueryString=__webpack_require__(194);module.exports=function(url){var queryIndex=url.indexOf("?"),hashIndex=url.indexOf("#"),queryEnd=hashIndex<0?url.length:hashIndex,pathEnd=queryIndex<0?queryEnd:queryIndex,path=url.slice(0,pathEnd).replace(/\/{2,}/g,"/");return path?("/"!==path[0]&&(path="/"+path),path.length>1&&"/"===path[path.length-1]&&(path=path.slice(0,-1))):path="/",{path,params:queryIndex<0?{}:parseQueryString(url.slice(queryIndex+1,queryEnd))}}},252:module=>{var PromisePolyfill=function(executor){if(!(this instanceof PromisePolyfill))throw new Error("Promise must be called with `new`");if("function"!=typeof executor)throw new TypeError("executor must be a function");var self=this,resolvers=[],rejectors=[],resolveCurrent=handler(resolvers,!0),rejectCurrent=handler(rejectors,!1),instance=self._instance={resolvers,rejectors},callAsync="function"==typeof setImmediate?setImmediate:setTimeout;function handler(list,shouldAbsorb){return function execute(value){var then;try{if(!shouldAbsorb||null==value||"object"!=typeof value&&"function"!=typeof value||"function"!=typeof(then=value.then))callAsync((function(){shouldAbsorb||0!==list.length||console.error("Possible unhandled promise rejection:",value);for(var i=0;i<list.length;i++)list[i](value);resolvers.length=0,rejectors.length=0,instance.state=shouldAbsorb,instance.retry=function(){execute(value)}}));else{if(value===self)throw new TypeError("Promise can't be resolved w/ itself");executeOnce(then.bind(value))}}catch(e){rejectCurrent(e)}}}function executeOnce(then){var runs=0;function run(fn){return function(value){runs++>0||fn(value)}}var onerror=run(rejectCurrent);try{then(run(resolveCurrent),onerror)}catch(e){onerror(e)}}executeOnce(executor)};PromisePolyfill.prototype.then=function(onFulfilled,onRejection){var resolveNext,rejectNext,instance=this._instance;function handle(callback,list,next,state){list.push((function(value){if("function"!=typeof callback)next(value);else try{resolveNext(callback(value))}catch(e){rejectNext&&rejectNext(e)}})),"function"==typeof instance.retry&&state===instance.state&&instance.retry()}var promise=new PromisePolyfill((function(resolve,reject){resolveNext=resolve,rejectNext=reject}));return handle(onFulfilled,instance.resolvers,resolveNext,!0),handle(onRejection,instance.rejectors,rejectNext,!1),promise},PromisePolyfill.prototype.catch=function(onRejection){return this.then(null,onRejection)},PromisePolyfill.prototype.finally=function(callback){return this.then((function(value){return PromisePolyfill.resolve(callback()).then((function(){return value}))}),(function(reason){return PromisePolyfill.resolve(callback()).then((function(){return PromisePolyfill.reject(reason)}))}))},PromisePolyfill.resolve=function(value){return value instanceof PromisePolyfill?value:new PromisePolyfill((function(resolve){resolve(value)}))},PromisePolyfill.reject=function(value){return new PromisePolyfill((function(resolve,reject){reject(value)}))},PromisePolyfill.all=function(list){return new PromisePolyfill((function(resolve,reject){var total=list.length,count=0,values=[];if(0===list.length)resolve([]);else for(var i=0;i<list.length;i++)!function(i){function consume(value){count++,values[i]=value,count===total&&resolve(values)}null==list[i]||"object"!=typeof list[i]&&"function"!=typeof list[i]||"function"!=typeof list[i].then?consume(list[i]):list[i].then(consume,reject)}(i)}))},PromisePolyfill.race=function(list){return new PromisePolyfill((function(resolve,reject){for(var i=0;i<list.length;i++)list[i].then(resolve,reject)}))},module.exports=PromisePolyfill},629:(module,__unused_webpack_exports,__webpack_require__)=>{var PromisePolyfill=__webpack_require__(252);"undefined"!=typeof window?(void 0===window.Promise?window.Promise=PromisePolyfill:window.Promise.prototype.finally||(window.Promise.prototype.finally=PromisePolyfill.prototype.finally),module.exports=window.Promise):void 0!==__webpack_require__.g?(void 0===__webpack_require__.g.Promise?__webpack_require__.g.Promise=PromisePolyfill:__webpack_require__.g.Promise.prototype.finally||(__webpack_require__.g.Promise.prototype.finally=PromisePolyfill.prototype.finally),module.exports=__webpack_require__.g.Promise):module.exports=PromisePolyfill},137:module=>{module.exports=function(object){if("[object Object]"!==Object.prototype.toString.call(object))return"";var args=[];for(var key in object)destructure(key,object[key]);return args.join("&");function destructure(key,value){if(Array.isArray(value))for(var i=0;i<value.length;i++)destructure(key+"["+i+"]",value[i]);else if("[object Object]"===Object.prototype.toString.call(value))for(var i in value)destructure(key+"["+i+"]",value[i]);else args.push(encodeURIComponent(key)+(null!=value&&""!==value?"="+encodeURIComponent(value):""))}}},194:module=>{module.exports=function(string){if(""===string||null==string)return{};"?"===string.charAt(0)&&(string=string.slice(1));for(var entries=string.split("&"),counters={},data={},i=0;i<entries.length;i++){var entry=entries[i].split("="),key=decodeURIComponent(entry[0]),value=2===entry.length?decodeURIComponent(entry[1]):"";"true"===value?value=!0:"false"===value&&(value=!1);var levels=key.split(/\]\[?|\[/),cursor=data;key.indexOf("[")>-1&&levels.pop();for(var j=0;j<levels.length;j++){var level=levels[j],nextLevel=levels[j+1],isNumber=""==nextLevel||!isNaN(parseInt(nextLevel,10));if(""===level)null==counters[key=levels.slice(0,j).join()]&&(counters[key]=Array.isArray(cursor)?cursor.length:0),level=counters[key]++;else if("__proto__"===level)break;if(j===levels.length-1)cursor[level]=value;else{var desc=Object.getOwnPropertyDescriptor(cursor,level);null!=desc&&(desc=desc.value),null==desc&&(cursor[level]=desc=isNumber?[]:{}),cursor=desc}}}return data}},759:(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__(50)(window)},27:(module,__unused_webpack_exports,__webpack_require__)=>{var Vnode=__webpack_require__(241),hyperscriptVnode=__webpack_require__(737);module.exports=function(){var vnode=hyperscriptVnode.apply(0,arguments);return vnode.tag="[",vnode.children=Vnode.normalizeChildren(vnode.children),vnode}},609:(module,__unused_webpack_exports,__webpack_require__)=>{var Vnode=__webpack_require__(241),hyperscriptVnode=__webpack_require__(737),selectorParser=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,selectorCache={},hasOwn={}.hasOwnProperty;function isEmpty(object){for(var key in object)if(hasOwn.call(object,key))return!1;return!0}function compileSelector(selector){for(var match,tag="div",classes=[],attrs={};match=selectorParser.exec(selector);){var type=match[1],value=match[2];if(""===type&&""!==value)tag=value;else if("#"===type)attrs.id=value;else if("."===type)classes.push(value);else if("["===match[3][0]){var attrValue=match[6];attrValue&&(attrValue=attrValue.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===match[4]?classes.push(attrValue):attrs[match[4]]=""===attrValue?attrValue:attrValue||!0}}return classes.length>0&&(attrs.className=classes.join(" ")),selectorCache[selector]={tag,attrs}}function execSelector(state,vnode){var attrs=vnode.attrs,children=Vnode.normalizeChildren(vnode.children),hasClass=hasOwn.call(attrs,"class"),className=hasClass?attrs.class:attrs.className;if(vnode.tag=state.tag,vnode.attrs=null,vnode.children=void 0,!isEmpty(state.attrs)&&!isEmpty(attrs)){var newAttrs={};for(var key in attrs)hasOwn.call(attrs,key)&&(newAttrs[key]=attrs[key]);attrs=newAttrs}for(var key in state.attrs)hasOwn.call(state.attrs,key)&&"className"!==key&&!hasOwn.call(attrs,key)&&(attrs[key]=state.attrs[key]);for(var key in null==className&&null==state.attrs.className||(attrs.className=null!=className?null!=state.attrs.className?String(state.attrs.className)+" "+String(className):className:null!=state.attrs.className?state.attrs.className:null),hasClass&&(attrs.class=null),attrs)if(hasOwn.call(attrs,key)&&"key"!==key){vnode.attrs=attrs;break}return Array.isArray(children)&&1===children.length&&null!=children[0]&&"#"===children[0].tag?vnode.text=children[0].children:vnode.children=children,vnode}module.exports=function(selector){if(null==selector||"string"!=typeof selector&&"function"!=typeof selector&&"function"!=typeof selector.view)throw Error("The selector must be either a string or a component.");var vnode=hyperscriptVnode.apply(1,arguments);return"string"==typeof selector&&(vnode.children=Vnode.normalizeChildren(vnode.children),"["!==selector)?execSelector(selectorCache[selector]||compileSelector(selector),vnode):(vnode.tag=selector,vnode)}},737:(module,__unused_webpack_exports,__webpack_require__)=>{var Vnode=__webpack_require__(241);module.exports=function(){var children,attrs=arguments[this],start=this+1;if(null==attrs?attrs={}:("object"!=typeof attrs||null!=attrs.tag||Array.isArray(attrs))&&(attrs={},start=this),arguments.length===start+1)children=arguments[start],Array.isArray(children)||(children=[children]);else for(children=[];start<arguments.length;)children.push(arguments[start++]);return Vnode("",attrs.key,attrs,children)}},50:(module,__unused_webpack_exports,__webpack_require__)=>{var Vnode=__webpack_require__(241);module.exports=function($window){var currentRedraw,$doc=$window&&$window.document,nameSpace={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function getNameSpace(vnode){return vnode.attrs&&vnode.attrs.xmlns||nameSpace[vnode.tag]}function checkState(vnode,original){if(vnode.state!==original)throw new Error("`vnode.state` must not be modified")}function callHook(vnode){var original=vnode.state;try{return this.apply(original,arguments)}finally{checkState(vnode,original)}}function activeElement(){try{return $doc.activeElement}catch(e){return null}}function createNodes(parent,vnodes,start,end,hooks,nextSibling,ns){for(var i=start;i<end;i++){var vnode=vnodes[i];null!=vnode&&createNode(parent,vnode,hooks,ns,nextSibling)}}function createNode(parent,vnode,hooks,ns,nextSibling){var tag=vnode.tag;if("string"==typeof tag)switch(vnode.state={},null!=vnode.attrs&&initLifecycle(vnode.attrs,vnode,hooks),tag){case"#":!function(parent,vnode,nextSibling){vnode.dom=$doc.createTextNode(vnode.children),insertNode(parent,vnode.dom,nextSibling)}(parent,vnode,nextSibling);break;case"<":createHTML(parent,vnode,ns,nextSibling);break;case"[":!function(parent,vnode,hooks,ns,nextSibling){var fragment=$doc.createDocumentFragment();if(null!=vnode.children){var children=vnode.children;createNodes(fragment,children,0,children.length,hooks,null,ns)}vnode.dom=fragment.firstChild,vnode.domSize=fragment.childNodes.length,insertNode(parent,fragment,nextSibling)}(parent,vnode,hooks,ns,nextSibling);break;default:!function(parent,vnode,hooks,ns,nextSibling){var tag=vnode.tag,attrs=vnode.attrs,is=attrs&&attrs.is,element=(ns=getNameSpace(vnode)||ns)?is?$doc.createElementNS(ns,tag,{is}):$doc.createElementNS(ns,tag):is?$doc.createElement(tag,{is}):$doc.createElement(tag);vnode.dom=element,null!=attrs&&function(vnode,attrs,ns){for(var key in attrs)setAttr(vnode,key,null,attrs[key],ns)}(vnode,attrs,ns);if(insertNode(parent,element,nextSibling),!maybeSetContentEditable(vnode)&&(null!=vnode.text&&(""!==vnode.text?element.textContent=vnode.text:vnode.children=[Vnode("#",void 0,void 0,vnode.text,void 0,void 0)]),null!=vnode.children)){var children=vnode.children;createNodes(element,children,0,children.length,hooks,null,ns),"select"===vnode.tag&&null!=attrs&&function(vnode,attrs){if("value"in attrs)if(null===attrs.value)-1!==vnode.dom.selectedIndex&&(vnode.dom.value=null);else{var normalized=""+attrs.value;vnode.dom.value===normalized&&-1!==vnode.dom.selectedIndex||(vnode.dom.value=normalized)}"selectedIndex"in attrs&&setAttr(vnode,"selectedIndex",null,attrs.selectedIndex,void 0)}(vnode,attrs)}}(parent,vnode,hooks,ns,nextSibling)}else!function(parent,vnode,hooks,ns,nextSibling){(function(vnode,hooks){var sentinel;if("function"==typeof vnode.tag.view){if(vnode.state=Object.create(vnode.tag),null!=(sentinel=vnode.state.view).$$reentrantLock$$)return;sentinel.$$reentrantLock$$=!0}else{if(vnode.state=void 0,null!=(sentinel=vnode.tag).$$reentrantLock$$)return;sentinel.$$reentrantLock$$=!0,vnode.state=null!=vnode.tag.prototype&&"function"==typeof vnode.tag.prototype.view?new vnode.tag(vnode):vnode.tag(vnode)}initLifecycle(vnode.state,vnode,hooks),null!=vnode.attrs&&initLifecycle(vnode.attrs,vnode,hooks);if(vnode.instance=Vnode.normalize(callHook.call(vnode.state.view,vnode)),vnode.instance===vnode)throw Error("A view cannot return the vnode it received as argument");sentinel.$$reentrantLock$$=null})(vnode,hooks),null!=vnode.instance?(createNode(parent,vnode.instance,hooks,ns,nextSibling),vnode.dom=vnode.instance.dom,vnode.domSize=null!=vnode.dom?vnode.instance.domSize:0):vnode.domSize=0}(parent,vnode,hooks,ns,nextSibling)}var possibleParents={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function createHTML(parent,vnode,ns,nextSibling){var match=vnode.children.match(/^\s*?<(\w+)/im)||[],temp=$doc.createElement(possibleParents[match[1]]||"div");"http://www.w3.org/2000/svg"===ns?(temp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+vnode.children+"</svg>",temp=temp.firstChild):temp.innerHTML=vnode.children,vnode.dom=temp.firstChild,vnode.domSize=temp.childNodes.length,vnode.instance=[];for(var child,fragment=$doc.createDocumentFragment();child=temp.firstChild;)vnode.instance.push(child),fragment.appendChild(child);insertNode(parent,fragment,nextSibling)}function updateNodes(parent,old,vnodes,hooks,nextSibling,ns){if(old!==vnodes&&(null!=old||null!=vnodes))if(null==old||0===old.length)createNodes(parent,vnodes,0,vnodes.length,hooks,nextSibling,ns);else if(null==vnodes||0===vnodes.length)removeNodes(parent,old,0,old.length);else{var isOldKeyed=null!=old[0]&&null!=old[0].key,isKeyed=null!=vnodes[0]&&null!=vnodes[0].key,start=0,oldStart=0;if(!isOldKeyed)for(;oldStart<old.length&&null==old[oldStart];)oldStart++;if(!isKeyed)for(;start<vnodes.length&&null==vnodes[start];)start++;if(null===isKeyed&&null==isOldKeyed)return;if(isOldKeyed!==isKeyed)removeNodes(parent,old,oldStart,old.length),createNodes(parent,vnodes,start,vnodes.length,hooks,nextSibling,ns);else if(isKeyed){for(var o,v,oe,ve,topSibling,oldEnd=old.length-1,end=vnodes.length-1;oldEnd>=oldStart&&end>=start&&(oe=old[oldEnd],ve=vnodes[end],oe.key===ve.key);)oe!==ve&&updateNode(parent,oe,ve,hooks,nextSibling,ns),null!=ve.dom&&(nextSibling=ve.dom),oldEnd--,end--;for(;oldEnd>=oldStart&&end>=start&&(o=old[oldStart],v=vnodes[start],o.key===v.key);)oldStart++,start++,o!==v&&updateNode(parent,o,v,hooks,getNextSibling(old,oldStart,nextSibling),ns);for(;oldEnd>=oldStart&&end>=start&&start!==end&&o.key===ve.key&&oe.key===v.key;)moveNodes(parent,oe,topSibling=getNextSibling(old,oldStart,nextSibling)),oe!==v&&updateNode(parent,oe,v,hooks,topSibling,ns),++start<=--end&&moveNodes(parent,o,nextSibling),o!==ve&&updateNode(parent,o,ve,hooks,nextSibling,ns),null!=ve.dom&&(nextSibling=ve.dom),oldStart++,oe=old[--oldEnd],ve=vnodes[end],o=old[oldStart],v=vnodes[start];for(;oldEnd>=oldStart&&end>=start&&oe.key===ve.key;)oe!==ve&&updateNode(parent,oe,ve,hooks,nextSibling,ns),null!=ve.dom&&(nextSibling=ve.dom),end--,oe=old[--oldEnd],ve=vnodes[end];if(start>end)removeNodes(parent,old,oldStart,oldEnd+1);else if(oldStart>oldEnd)createNodes(parent,vnodes,start,end+1,hooks,nextSibling,ns);else{var map,lisIndices,originalNextSibling=nextSibling,vnodesLength=end-start+1,oldIndices=new Array(vnodesLength),li=0,i=0,pos=2147483647,matched=0;for(i=0;i<vnodesLength;i++)oldIndices[i]=-1;for(i=end;i>=start;i--){null==map&&(map=getKeyMap(old,oldStart,oldEnd+1));var oldIndex=map[(ve=vnodes[i]).key];null!=oldIndex&&(pos=oldIndex<pos?oldIndex:-1,oldIndices[i-start]=oldIndex,oe=old[oldIndex],old[oldIndex]=null,oe!==ve&&updateNode(parent,oe,ve,hooks,nextSibling,ns),null!=ve.dom&&(nextSibling=ve.dom),matched++)}if(nextSibling=originalNextSibling,matched!==oldEnd-oldStart+1&&removeNodes(parent,old,oldStart,oldEnd+1),0===matched)createNodes(parent,vnodes,start,end+1,hooks,nextSibling,ns);else if(-1===pos)for(li=(lisIndices=function(a){var result=[0],u=0,v=0,i=0,il=lisTemp.length=a.length;for(i=0;i<il;i++)lisTemp[i]=a[i];for(i=0;i<il;++i)if(-1!==a[i]){var j=result[result.length-1];if(a[j]<a[i])lisTemp[i]=j,result.push(i);else{for(u=0,v=result.length-1;u<v;){var c=(u>>>1)+(v>>>1)+(u&v&1);a[result[c]]<a[i]?u=c+1:v=c}a[i]<a[result[u]]&&(u>0&&(lisTemp[i]=result[u-1]),result[u]=i)}}u=result.length,v=result[u-1];for(;u-- >0;)result[u]=v,v=lisTemp[v];return lisTemp.length=0,result}(oldIndices)).length-1,i=end;i>=start;i--)v=vnodes[i],-1===oldIndices[i-start]?createNode(parent,v,hooks,ns,nextSibling):lisIndices[li]===i-start?li--:moveNodes(parent,v,nextSibling),null!=v.dom&&(nextSibling=vnodes[i].dom);else for(i=end;i>=start;i--)v=vnodes[i],-1===oldIndices[i-start]&&createNode(parent,v,hooks,ns,nextSibling),null!=v.dom&&(nextSibling=vnodes[i].dom)}}else{var commonLength=old.length<vnodes.length?old.length:vnodes.length;for(start=start<oldStart?start:oldStart;start<commonLength;start++)(o=old[start])===(v=vnodes[start])||null==o&&null==v||(null==o?createNode(parent,v,hooks,ns,getNextSibling(old,start+1,nextSibling)):null==v?removeNode(parent,o):updateNode(parent,o,v,hooks,getNextSibling(old,start+1,nextSibling),ns));old.length>commonLength&&removeNodes(parent,old,start,old.length),vnodes.length>commonLength&&createNodes(parent,vnodes,start,vnodes.length,hooks,nextSibling,ns)}}}function updateNode(parent,old,vnode,hooks,nextSibling,ns){var oldTag=old.tag;if(oldTag===vnode.tag){if(vnode.state=old.state,vnode.events=old.events,function(vnode,old){do{var force;if(null!=vnode.attrs&&"function"==typeof vnode.attrs.onbeforeupdate)if(void 0!==(force=callHook.call(vnode.attrs.onbeforeupdate,vnode,old))&&!force)break;if("string"!=typeof vnode.tag&&"function"==typeof vnode.state.onbeforeupdate)if(void 0!==(force=callHook.call(vnode.state.onbeforeupdate,vnode,old))&&!force)break;return!1}while(0);return vnode.dom=old.dom,vnode.domSize=old.domSize,vnode.instance=old.instance,vnode.attrs=old.attrs,vnode.children=old.children,vnode.text=old.text,!0}(vnode,old))return;if("string"==typeof oldTag)switch(null!=vnode.attrs&&updateLifecycle(vnode.attrs,vnode,hooks),oldTag){case"#":!function(old,vnode){old.children.toString()!==vnode.children.toString()&&(old.dom.nodeValue=vnode.children);vnode.dom=old.dom}(old,vnode);break;case"<":!function(parent,old,vnode,ns,nextSibling){old.children!==vnode.children?(removeHTML(parent,old),createHTML(parent,vnode,ns,nextSibling)):(vnode.dom=old.dom,vnode.domSize=old.domSize,vnode.instance=old.instance)}(parent,old,vnode,ns,nextSibling);break;case"[":!function(parent,old,vnode,hooks,nextSibling,ns){updateNodes(parent,old.children,vnode.children,hooks,nextSibling,ns);var domSize=0,children=vnode.children;if(vnode.dom=null,null!=children){for(var i=0;i<children.length;i++){var child=children[i];null!=child&&null!=child.dom&&(null==vnode.dom&&(vnode.dom=child.dom),domSize+=child.domSize||1)}1!==domSize&&(vnode.domSize=domSize)}}(parent,old,vnode,hooks,nextSibling,ns);break;default:!function(old,vnode,hooks,ns){var element=vnode.dom=old.dom;ns=getNameSpace(vnode)||ns,"textarea"===vnode.tag&&(null==vnode.attrs&&(vnode.attrs={}),null!=vnode.text&&(vnode.attrs.value=vnode.text,vnode.text=void 0));(function(vnode,old,attrs,ns){if(null!=attrs)for(var key in attrs)setAttr(vnode,key,old&&old[key],attrs[key],ns);var val;if(null!=old)for(var key in old)null==(val=old[key])||null!=attrs&&null!=attrs[key]||removeAttr(vnode,key,val,ns)})(vnode,old.attrs,vnode.attrs,ns),maybeSetContentEditable(vnode)||(null!=old.text&&null!=vnode.text&&""!==vnode.text?old.text.toString()!==vnode.text.toString()&&(old.dom.firstChild.nodeValue=vnode.text):(null!=old.text&&(old.children=[Vnode("#",void 0,void 0,old.text,void 0,old.dom.firstChild)]),null!=vnode.text&&(vnode.children=[Vnode("#",void 0,void 0,vnode.text,void 0,void 0)]),updateNodes(element,old.children,vnode.children,hooks,null,ns)))}(old,vnode,hooks,ns)}else!function(parent,old,vnode,hooks,nextSibling,ns){if(vnode.instance=Vnode.normalize(callHook.call(vnode.state.view,vnode)),vnode.instance===vnode)throw Error("A view cannot return the vnode it received as argument");updateLifecycle(vnode.state,vnode,hooks),null!=vnode.attrs&&updateLifecycle(vnode.attrs,vnode,hooks);null!=vnode.instance?(null==old.instance?createNode(parent,vnode.instance,hooks,ns,nextSibling):updateNode(parent,old.instance,vnode.instance,hooks,nextSibling,ns),vnode.dom=vnode.instance.dom,vnode.domSize=vnode.instance.domSize):null!=old.instance?(removeNode(parent,old.instance),vnode.dom=void 0,vnode.domSize=0):(vnode.dom=old.dom,vnode.domSize=old.domSize)}(parent,old,vnode,hooks,nextSibling,ns)}else removeNode(parent,old),createNode(parent,vnode,hooks,ns,nextSibling)}function getKeyMap(vnodes,start,end){for(var map=Object.create(null);start<end;start++){var vnode=vnodes[start];if(null!=vnode){var key=vnode.key;null!=key&&(map[key]=start)}}return map}var lisTemp=[];function getNextSibling(vnodes,i,nextSibling){for(;i<vnodes.length;i++)if(null!=vnodes[i]&&null!=vnodes[i].dom)return vnodes[i].dom;return nextSibling}function moveNodes(parent,vnode,nextSibling){var frag=$doc.createDocumentFragment();moveChildToFrag(parent,frag,vnode),insertNode(parent,frag,nextSibling)}function moveChildToFrag(parent,frag,vnode){for(;null!=vnode.dom&&vnode.dom.parentNode===parent;){if("string"!=typeof vnode.tag){if(null!=(vnode=vnode.instance))continue}else if("<"===vnode.tag)for(var i=0;i<vnode.instance.length;i++)frag.appendChild(vnode.instance[i]);else if("["!==vnode.tag)frag.appendChild(vnode.dom);else if(1===vnode.children.length){if(null!=(vnode=vnode.children[0]))continue}else for(i=0;i<vnode.children.length;i++){var child=vnode.children[i];null!=child&&moveChildToFrag(parent,frag,child)}break}}function insertNode(parent,dom,nextSibling){null!=nextSibling?parent.insertBefore(dom,nextSibling):parent.appendChild(dom)}function maybeSetContentEditable(vnode){if(null==vnode.attrs||null==vnode.attrs.contenteditable&&null==vnode.attrs.contentEditable)return!1;var children=vnode.children;if(null!=children&&1===children.length&&"<"===children[0].tag){var content=children[0].children;vnode.dom.innerHTML!==content&&(vnode.dom.innerHTML=content)}else if(null!=vnode.text||null!=children&&0!==children.length)throw new Error("Child node of a contenteditable must be trusted");return!0}function removeNodes(parent,vnodes,start,end){for(var i=start;i<end;i++){var vnode=vnodes[i];null!=vnode&&removeNode(parent,vnode)}}function removeNode(parent,vnode){var stateResult,attrsResult,result,mask=0,original=vnode.state;"string"!=typeof vnode.tag&&"function"==typeof vnode.state.onbeforeremove&&(null!=(result=callHook.call(vnode.state.onbeforeremove,vnode))&&"function"==typeof result.then&&(mask=1,stateResult=result));vnode.attrs&&"function"==typeof vnode.attrs.onbeforeremove&&(null!=(result=callHook.call(vnode.attrs.onbeforeremove,vnode))&&"function"==typeof result.then&&(mask|=2,attrsResult=result));if(checkState(vnode,original),mask){if(null!=stateResult){var next=function(){1&mask&&((mask&=2)||reallyRemove())};stateResult.then(next,next)}if(null!=attrsResult){next=function(){2&mask&&((mask&=1)||reallyRemove())};attrsResult.then(next,next)}}else onremove(vnode),removeChild(parent,vnode);function reallyRemove(){checkState(vnode,original),onremove(vnode),removeChild(parent,vnode)}}function removeHTML(parent,vnode){for(var i=0;i<vnode.instance.length;i++)parent.removeChild(vnode.instance[i])}function removeChild(parent,vnode){for(;null!=vnode.dom&&vnode.dom.parentNode===parent;){if("string"!=typeof vnode.tag){if(null!=(vnode=vnode.instance))continue}else if("<"===vnode.tag)removeHTML(parent,vnode);else{if("["!==vnode.tag&&(parent.removeChild(vnode.dom),!Array.isArray(vnode.children)))break;if(1===vnode.children.length){if(null!=(vnode=vnode.children[0]))continue}else for(var i=0;i<vnode.children.length;i++){var child=vnode.children[i];null!=child&&removeChild(parent,child)}}break}}function onremove(vnode){if("string"!=typeof vnode.tag&&"function"==typeof vnode.state.onremove&&callHook.call(vnode.state.onremove,vnode),vnode.attrs&&"function"==typeof vnode.attrs.onremove&&callHook.call(vnode.attrs.onremove,vnode),"string"!=typeof vnode.tag)null!=vnode.instance&&onremove(vnode.instance);else{var children=vnode.children;if(Array.isArray(children))for(var i=0;i<children.length;i++){var child=children[i];null!=child&&onremove(child)}}}function setAttr(vnode,key,old,value,ns){if("key"!==key&&"is"!==key&&null!=value&&!isLifecycleMethod(key)&&(old!==value||function(vnode,attr){return"value"===attr||"checked"===attr||"selectedIndex"===attr||"selected"===attr&&vnode.dom===activeElement()||"option"===vnode.tag&&vnode.dom.parentNode===$doc.activeElement}(vnode,key)||"object"==typeof value)){if("o"===key[0]&&"n"===key[1])return updateEvent(vnode,key,value);if("xlink:"===key.slice(0,6))vnode.dom.setAttributeNS("http://www.w3.org/1999/xlink",key.slice(6),value);else if("style"===key)updateStyle(vnode.dom,old,value);else if(hasPropertyKey(vnode,key,ns)){if("value"===key){if(("input"===vnode.tag||"textarea"===vnode.tag)&&vnode.dom.value===""+value&&vnode.dom===activeElement())return;if("select"===vnode.tag&&null!==old&&vnode.dom.value===""+value)return;if("option"===vnode.tag&&null!==old&&vnode.dom.value===""+value)return}"input"===vnode.tag&&"type"===key?vnode.dom.setAttribute(key,value):vnode.dom[key]=value}else"boolean"==typeof value?value?vnode.dom.setAttribute(key,""):vnode.dom.removeAttribute(key):vnode.dom.setAttribute("className"===key?"class":key,value)}}function removeAttr(vnode,key,old,ns){if("key"!==key&&"is"!==key&&null!=old&&!isLifecycleMethod(key))if("o"!==key[0]||"n"!==key[1]||isLifecycleMethod(key))if("style"===key)updateStyle(vnode.dom,old,null);else if(!hasPropertyKey(vnode,key,ns)||"className"===key||"value"===key&&("option"===vnode.tag||"select"===vnode.tag&&-1===vnode.dom.selectedIndex&&vnode.dom===activeElement())||"input"===vnode.tag&&"type"===key){var nsLastIndex=key.indexOf(":");-1!==nsLastIndex&&(key=key.slice(nsLastIndex+1)),!1!==old&&vnode.dom.removeAttribute("className"===key?"class":key)}else vnode.dom[key]=null;else updateEvent(vnode,key,void 0)}function isLifecycleMethod(attr){return"oninit"===attr||"oncreate"===attr||"onupdate"===attr||"onremove"===attr||"onbeforeremove"===attr||"onbeforeupdate"===attr}function hasPropertyKey(vnode,key,ns){return void 0===ns&&(vnode.tag.indexOf("-")>-1||null!=vnode.attrs&&vnode.attrs.is||"href"!==key&&"list"!==key&&"form"!==key&&"width"!==key&&"height"!==key)&&key in vnode.dom}var uppercaseRegex=/[A-Z]/g;function toLowerCase(capital){return"-"+capital.toLowerCase()}function normalizeKey(key){return"-"===key[0]&&"-"===key[1]?key:"cssFloat"===key?"float":key.replace(uppercaseRegex,toLowerCase)}function updateStyle(element,old,style){if(old===style);else if(null==style)element.style.cssText="";else if("object"!=typeof style)element.style.cssText=style;else if(null==old||"object"!=typeof old)for(var key in element.style.cssText="",style){null!=(value=style[key])&&element.style.setProperty(normalizeKey(key),String(value))}else{for(var key in style){var value;null!=(value=style[key])&&(value=String(value))!==String(old[key])&&element.style.setProperty(normalizeKey(key),value)}for(var key in old)null!=old[key]&&null==style[key]&&element.style.removeProperty(normalizeKey(key))}}function EventDict(){this._=currentRedraw}function updateEvent(vnode,key,value){if(null!=vnode.events){if(vnode.events[key]===value)return;null==value||"function"!=typeof value&&"object"!=typeof value?(null!=vnode.events[key]&&vnode.dom.removeEventListener(key.slice(2),vnode.events,!1),vnode.events[key]=void 0):(null==vnode.events[key]&&vnode.dom.addEventListener(key.slice(2),vnode.events,!1),vnode.events[key]=value)}else null==value||"function"!=typeof value&&"object"!=typeof value||(vnode.events=new EventDict,vnode.dom.addEventListener(key.slice(2),vnode.events,!1),vnode.events[key]=value)}function initLifecycle(source,vnode,hooks){"function"==typeof source.oninit&&callHook.call(source.oninit,vnode),"function"==typeof source.oncreate&&hooks.push(callHook.bind(source.oncreate,vnode))}function updateLifecycle(source,vnode,hooks){"function"==typeof source.onupdate&&hooks.push(callHook.bind(source.onupdate,vnode))}return EventDict.prototype=Object.create(null),EventDict.prototype.handleEvent=function(ev){var result,handler=this["on"+ev.type];"function"==typeof handler?result=handler.call(ev.currentTarget,ev):"function"==typeof handler.handleEvent&&handler.handleEvent(ev),this._&&!1!==ev.redraw&&(0,this._)(),!1===result&&(ev.preventDefault(),ev.stopPropagation())},function(dom,vnodes,redraw){if(!dom)throw new TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var hooks=[],active=activeElement(),namespace=dom.namespaceURI;null==dom.vnodes&&(dom.textContent=""),vnodes=Vnode.normalizeChildren(Array.isArray(vnodes)?vnodes:[vnodes]);var prevRedraw=currentRedraw;try{currentRedraw="function"==typeof redraw?redraw:void 0,updateNodes(dom,dom.vnodes,vnodes,hooks,null,"http://www.w3.org/1999/xhtml"===namespace?void 0:namespace)}finally{currentRedraw=prevRedraw}dom.vnodes=vnodes,null!=active&&activeElement()!==active&&"function"==typeof active.focus&&active.focus();for(var i=0;i<hooks.length;i++)hooks[i]()}}},769:(module,__unused_webpack_exports,__webpack_require__)=>{var Vnode=__webpack_require__(241);module.exports=function(html){return null==html&&(html=""),Vnode("<",void 0,void 0,html,void 0,void 0)}},241:module=>{function Vnode(tag,key,attrs,children,text,dom){return{tag,key,attrs,children,text,dom,domSize:void 0,state:void 0,events:void 0,instance:void 0}}Vnode.normalize=function(node){return Array.isArray(node)?Vnode("[",void 0,void 0,Vnode.normalizeChildren(node),void 0,void 0):null==node||"boolean"==typeof node?null:"object"==typeof node?node:Vnode("#",void 0,void 0,String(node),void 0,void 0)},Vnode.normalizeChildren=function(input){var children=[];if(input.length){for(var isKeyed=null!=input[0]&&null!=input[0].key,i=1;i<input.length;i++)if((null!=input[i]&&null!=input[i].key)!==isKeyed)throw new TypeError("Vnodes must either always have keys or never have keys!");for(i=0;i<input.length;i++)children[i]=Vnode.normalize(input[i])}return children},module.exports=Vnode},996:(module,__unused_webpack_exports,__webpack_require__)=>{var PromisePolyfill=__webpack_require__(629),mountRedraw=__webpack_require__(367);module.exports=__webpack_require__(423)(window,PromisePolyfill,mountRedraw.redraw)},423:(module,__unused_webpack_exports,__webpack_require__)=>{var buildPathname=__webpack_require__(16);module.exports=function($window,Promise,oncompletion){var callbackCount=0;function PromiseProxy(executor){return new Promise(executor)}function makeRequest(factory){return function(url,args){"string"!=typeof url?(args=url,url=url.url):null==args&&(args={});var promise=new Promise((function(resolve,reject){factory(buildPathname(url,args.params),args,(function(data){if("function"==typeof args.type)if(Array.isArray(data))for(var i=0;i<data.length;i++)data[i]=new args.type(data[i]);else data=new args.type(data);resolve(data)}),reject)}));if(!0===args.background)return promise;var count=0;function complete(){0==--count&&"function"==typeof oncompletion&&oncompletion()}return function wrap(promise){var then=promise.then;return promise.constructor=PromiseProxy,promise.then=function(){count++;var next=then.apply(promise,arguments);return next.then(complete,(function(e){if(complete(),0===count)throw e})),wrap(next)},promise}(promise)}}function hasHeader(args,name){for(var key in args.headers)if({}.hasOwnProperty.call(args.headers,key)&&name.test(key))return!0;return!1}return PromiseProxy.prototype=Promise.prototype,PromiseProxy.__proto__=Promise,{request:makeRequest((function(url,args,resolve,reject){var replacedAbort,method=null!=args.method?args.method.toUpperCase():"GET",body=args.body,assumeJSON=!(null!=args.serialize&&args.serialize!==JSON.serialize||body instanceof $window.FormData),responseType=args.responseType||("function"==typeof args.extract?"":"json"),xhr=new $window.XMLHttpRequest,aborted=!1,original=xhr,abort=xhr.abort;for(var key in xhr.abort=function(){aborted=!0,abort.call(this)},xhr.open(method,url,!1!==args.async,"string"==typeof args.user?args.user:void 0,"string"==typeof args.password?args.password:void 0),assumeJSON&&null!=body&&!hasHeader(args,/^content-type$/i)&&xhr.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof args.deserialize||hasHeader(args,/^accept$/i)||xhr.setRequestHeader("Accept","application/json, text/*"),args.withCredentials&&(xhr.withCredentials=args.withCredentials),args.timeout&&(xhr.timeout=args.timeout),xhr.responseType=responseType,args.headers)({}).hasOwnProperty.call(args.headers,key)&&xhr.setRequestHeader(key,args.headers[key]);xhr.onreadystatechange=function(ev){if(!aborted&&4===ev.target.readyState)try{var message,success=ev.target.status>=200&&ev.target.status<300||304===ev.target.status||/^file:\/\//i.test(url),response=ev.target.response;if("json"===responseType?ev.target.responseType||"function"==typeof args.extract||(response=JSON.parse(ev.target.responseText)):responseType&&"text"!==responseType||null==response&&(response=ev.target.responseText),"function"==typeof args.extract?(response=args.extract(ev.target,args),success=!0):"function"==typeof args.deserialize&&(response=args.deserialize(response)),success)resolve(response);else{try{message=ev.target.responseText}catch(e){message=response}var error=new Error(message);error.code=ev.target.status,error.response=response,reject(error)}}catch(e){reject(e)}},"function"==typeof args.config&&(xhr=args.config(xhr,args,url)||xhr)!==original&&(replacedAbort=xhr.abort,xhr.abort=function(){aborted=!0,replacedAbort.call(this)}),null==body?xhr.send():"function"==typeof args.serialize?xhr.send(args.serialize(body)):body instanceof $window.FormData?xhr.send(body):xhr.send(JSON.stringify(body))})),jsonp:makeRequest((function(url,args,resolve,reject){var callbackName=args.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+callbackCount++,script=$window.document.createElement("script");$window[callbackName]=function(data){delete $window[callbackName],script.parentNode.removeChild(script),resolve(data)},script.onerror=function(){delete $window[callbackName],script.parentNode.removeChild(script),reject(new Error("JSONP request failed"))},script.src=url+(url.indexOf("?")<0?"?":"&")+encodeURIComponent(args.callbackKey||"callback")+"="+encodeURIComponent(callbackName),$window.document.documentElement.appendChild(script)}))}}},116:(module,__unused_webpack_exports,__webpack_require__)=>{var mountRedraw=__webpack_require__(367);module.exports=__webpack_require__(140)(window,mountRedraw)},844:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Button:()=>Button,ButtonSymbols:()=>ButtonSymbols,Collapsible:()=>Collapsible,EditCheckbox:()=>EditCheckbox,EditDate:()=>EditDate,EditLabel:()=>EditLabel,EditList:()=>EditList,EditSelect:()=>EditSelect,EditTextarea:()=>EditTextarea,EnabledWidget:()=>EnabledWidget,Grid:()=>Grid,Icon:()=>Icon,IconButton:()=>IconButton,IconButtons:()=>IconButtons,Label:()=>Label,Menu:()=>Menu,MenuPanel:()=>MenuPanel,Modal:()=>Modal,OnOffButton:()=>OnOffButton,OptionButtons:()=>OptionButtons,Pivot:()=>Pivot,Popup:()=>Popup,RadioButtons:()=>RadioButtons,Router:()=>Router,Slider:()=>Slider,State:()=>State,ToolbarButton:()=>ToolbarButton,TypeAhead:()=>TypeAhead,Widget:()=>Widget,makeHtml:()=>makeHtml});var mithril=__webpack_require__(386);const monthStr=[["Jan","January"],["Feb","February"],["Mar","March"],["Apr","April"],["May","May"],["Jun","June"],["Jul","July"],["Aug","August"],["Sep","September"],["Oct","October"],["Nov","November"],["Dec","December"]],dayStr=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]];function formatNumber(number,digits){let r=""+number;for(;r.length<digits;)r="0"+r;return r}const COLOR={clear:"color:#000; background-color:inherit; font-weight:normal;",bold:"font-weight:bold;",dim:"",underscore:"",blink:"",reverse:"",hidden:"",black:"color:#000;",red:"color:#f00;",green:"color:#0f0;",yellow:"color:#ff0;",blue:"color:#00f;",magenta:"color:#f0f;",cyan:"color:#0ff;",white:"color:#fff;",darkred:"color:#800;",darkgreen:"color:#080;",darkyellow:"color:#880;",darkblue:"color:#008;",darkmagenta:"color:#808;",darkcyan:"color:#088;",gray:"color:#888;",bgBlack:"background-color:#000;",bgRed:"background-color:#f00;",bgGreen:"background-color:#0f0;",bgYellow:"background-color:#ff0;",bgBlue:"background-color:#00f;",bgMagenta:"background-color:#f0f;",bgCyan:"background-color:#0ff;",bgWhite:"background-color:#fff;"};class Log{constructor(prefix){this.reportLevel=void 0,this.reportPrefix="",this.maxLength=-1,this.colors=!0,this.reportPrefix=prefix}set messageLength(max){this.maxLength=max}get messageLength(){return this.maxLength}level(newLevelSym,setGlobalLevel){let newLevel=Log.levels[newLevelSym]||Log.globalLevel,oldLevel=this.reportLevel||Log.globalLevel;if(void 0===newLevelSym)newLevel=oldLevel;else if(null===newLevelSym)this.reportLevel=void 0;else if(Log.levels[newLevelSym]){setGlobalLevel?Log.globalLevel=newLevel:this.reportLevel=newLevel;const msg=`new ${setGlobalLevel?"global":this.reportPrefix} log level ${newLevel.desc.toUpperCase()} (was ${oldLevel.desc.toUpperCase()})`;newLevel.sym===oldLevel.sym?this.debug(msg):this.info(msg)}else this.error(`unkown level ${newLevelSym}; log level remains ${oldLevel.sym}`);return newLevel.sym}debug(msg){return this.out(Log.DEBUG,msg,{color:["gray"]})}transient(msg){return this.out(Log.INFO,msg,{color:["darkgreen"],lf:"\r"})}progress(msg){return this.out(Log.INFO,msg,{color:["darkblue"]})}info(msg){return this.out(Log.INFO,msg,{color:["darkgreen"]})}warn(msg){return this.out(Log.WARN,msg,{color:["darkyellow","bold"]})}error(msg){const color=["darkred","bold"];return msg.message?(this.out(Log.ERROR,msg.message,{color}),this.out(Log.ERROR,msg.stack,{color}),msg.message):this.out(Log.ERROR,msg,{color})}out(lvl,msg,options){let desc=Log.levels[lvl];const filterLevel=this.reportLevel||Log.globalLevel;if(desc.importance>=filterLevel.importance){let line;switch(typeof msg){case"function":line=msg();break;case"string":line=msg;break;case"object":default:line=this.inspect(msg)}const dateStr=function(formatString,date=new Date){return"string"!=typeof formatString||isNaN(date.getTime())?"invalid":formatString.replace(/%YYYY/g,""+date.getFullYear()).replace(/%YY/g,""+date.getFullYear()%100).replace(/%MMMM/g,monthStr[date.getMonth()][1]).replace(/%MMM/g,monthStr[date.getMonth()][0]).replace(/%MM/g,formatNumber(date.getMonth()+1,2)).replace(/%M/g,""+(date.getMonth()+1)).replace(/%DDDD/g,dayStr[date.getDay()][1]).replace(/%DDD/g,dayStr[date.getDay()][0]).replace(/%DD/g,formatNumber(date.getDate(),2)).replace(/%D/g,""+date.getDate()).replace(/%hh/g,formatNumber(date.getHours(),2)).replace(/%h/g,""+date.getHours()).replace(/%mm/g,formatNumber(date.getMinutes(),2)).replace(/%m/g,""+date.getMinutes()).replace(/%ss/g,formatNumber(date.getSeconds(),2)).replace(/%jjj/g,formatNumber(date.getMilliseconds(),3)).replace(/%jj/g,formatNumber(date.getMilliseconds()/10,2)).replace(/%j/g,formatNumber(date.getMilliseconds()/100,1))}(Log.dateFormat);line.length>this.maxLength&&this.maxLength>0&&(line=`${line.slice(0,this.maxLength/2-2)}...${line.slice(-this.maxLength/2+2)}`),msg.stack&&(line=`${line}\n${msg.stack}`);const header=`${dateStr} ${this.reportPrefix} ${desc.desc}`;return this.output(options.color,header,line),line+(options.lf||"")}}output(color,header,line){console.log(`%c${header}%c ${line}`,color.map((c=>COLOR[c])).join(" "),COLOR.clear)}format(fmtStr){return null===fmtStr?Log.dateFormat=Log.defDateFormat:fmtStr&&(Log.dateFormat=fmtStr),Log.dateFormat}prefix(prf){return prf&&(this.reportPrefix=prf),this.reportPrefix}config(cfg){void 0!==cfg.format&&this.format(cfg.format),void 0!==cfg.level&&this.level(cfg.level),void 0!==cfg.colors&&(this.colors=cfg.colors)}inspect(msg,{depth=-1,indent="   ",colors=Log.INDENT_COLORS}={depth:0,indent:"   ",colors:Log.INDENT_COLORS}){const log=this;return function _inspect(msg,depth,level,currIndent){if(null===msg)return"null";if(void 0===msg)return"undefined";if("function"==typeof msg)return"function";if("string"==typeof msg)return`'${msg}'`;if("object"==typeof msg){if(depth<0)return void 0===msg.length?"{...}":"[...]";if(void 0!==msg.map)return`[${msg.map((e=>void 0===e?"":_inspect(e,depth-1,level+1,currIndent))).join(", ")}]`;const[prefix,postfix,lf,postIndent]=log.getPrePostfix(indent,level,currIndent,colors);return"{"+lf+Object.keys(msg).map((k=>`${prefix}${k}${postfix}: ${_inspect(msg[k],depth-1,level+1,currIndent+indent)}`)).join(","+lf)+`${lf}${postIndent}}`}return msg.toString()}(msg,null!=depth&&depth>=0?depth:999,0,"")}getPrePostfix(indent,level,currIndent,colors){let cstart="",cstop="",lf="\n";if(colors){indent=indent.replace(/ /g,"&nbsp;"),currIndent=currIndent.replace(/ /g,"&nbsp;");cstart=`<b><span style='${COLOR[colors[level%colors.length]]||colors[level%colors.length]}'>`,cstop="</span></b>",lf="<br>"}return[`${currIndent}${indent}${cstart}`,""+cstop,colors?"<br>":"\n",currIndent]}}Log.INDENT_COLORS=["darkblue","darkgreen","darkred","darkcyan","darkyellow","darkmagenta"],Log.defDateFormat="%YYYY%MM%DD %hh:%mm:%ss.%jjj",Log.dateFormat=Log.defDateFormat,Log.DEBUG="DEBUG",Log.INFO="INFO",Log.WARN="WARN",Log.ERROR="ERROR",Log.levels={[Log.DEBUG]:{importance:0,sym:Log.DEBUG,desc:"DEBUG"},[Log.INFO]:{importance:1,sym:Log.INFO,desc:"INFO"},[Log.WARN]:{importance:2,sym:Log.WARN,desc:"WARN"},[Log.ERROR]:{importance:3,sym:Log.ERROR,desc:"ERROR"}},Log.log=new Log(""),Log.globalLevel=Log.levels[Log.INFO];new Log("Pacing");__webpack_require__(417);new Log("RequestDigest");new Log("RequestBasic");const Request_log=new Log("Request");Request_log.messageLength=120;class Widget{attrs(a,others){const attrs=others||{};return a.id&&(attrs.id=a.id),a.class&&(attrs.class=[attrs.class||"",a.class].join(" ")),a.style&&(attrs.style=[attrs.style||"",a.style].join(" ")),attrs}}class EnabledWidget extends Widget{constructor(){super(...arguments),this.enabled=!0}enable(set){this.enabled=set}attrs(a,others){const attrs=super.attrs(a,others);return attrs.class=[attrs.class,this.enabled?"":"hs_disabled"].join(" "),attrs}}class Icon extends Widget{view(node){const svg=node.attrs.mdi||"info",icon=Icon.predefined[svg]||svg,css=Icon.predefined[svg]?"."+svg:"";return mithril(".hs_icon",this.attrs(node.attrs),[mithril("svg"+css,{height:"100%",viewBox:"0 0 24 24"},mithril("path",{d:icon})),node.children.length?mithril("span.hs_icon_content",node.children):void 0])}}Icon.predefined={info:"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",warn:"M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z",stop:"M13 13H11V7H13M11 15H13V17H11M15.73 3H8.27L3 8.27V15.73L8.27 21H15.73L21 15.73V8.27L15.73 3Z",power:"M16.56,5.44L15.11,6.89C16.84,7.94 18,9.83 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12C6,9.83 7.16,7.94 8.88,6.88L7.44,5.44C5.36,6.88 4,9.28 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12C20,9.28 18.64,6.88 16.56,5.44M13,3H11V13H13",plus:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",minus:"M19,13H5V11H19V13Z",plusminus:"M3 7H6V4H8V7H11V9H8V12H6V9H3V7M13 15H21V17H13V15M16.04 3H18.35L7.96 21H5.65L16.04 3Z",chevronUp:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",chevronDown:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",chevronLeft:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z",chevronRight:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",home:"M12 5.69L17 10.19V18H15V12H9V18H7V10.19L12 5.69M12 3L2 12H5V20H11V14H13V20H19V12H22L12 3Z"};class State{constructor(numValues,initialValue=0,transition=State.transitions.cycle){this.numValues=numValues,this.transition=transition,this.state=0,this.getNumValues=()=>this.numValues,this.getValue=()=>this.state,this.setValue=newValue=>this.state=newValue%this.numValues,this.advance=input=>this.transition(this,input),this.state=initialValue}}State.transitions={cycle:state=>state.setValue((state.getValue()+1)%state.getNumValues())};new Log("Button");class Button extends EnabledWidget{oninit(node){if(node.state.pressed=!1,node.state.pressing=down=>node.state.pressed=!!this.enabled&&down,!this.state){const numValues=node.attrs.numValues||node.children.length||1,initial=node.attrs.initial??0,transition=node.attrs.transition??State.transitions.cycle;this.state=new State(numValues,initial,transition)}node.attrs.stateAccess&&node.attrs.stateAccess(this.state)}view(node){const s=node.state;return this.enable(!node.attrs.disable),mithril(".hs_button.state"+s.state.getValue(),this.attrs(node.attrs,{class:s.pressed?"hs_pressed":void 0,onclick:()=>{if(this.enabled){const newValue=s.state.advance();node.attrs.onclick(newValue)}},onmousedown:()=>s.pressing(!0),onmouseup:()=>s.pressing(!1)}),node.children.length>1?node.children[s.state.getValue()]:node.children)}}class OnOffButton extends Button{oninit(node){const initial=node.attrs.initial??0;this.state=new State(2,initial),super.oninit(node)}view(node){return node.attrs.class=["hs_onoff_button",node.attrs.class||""].join(" "),super.view(node)}}OnOffButton.states=["off","on"];class IconButton extends Button{oninit(node){super.oninit(node)}view(node){return node.attrs.class=["hs_icon_button",node.attrs.class||""].join(" "),node.children[0]=mithril(Icon,{mdi:node.attrs.mdi}),super.view(node)}}var Expansion;!function(Expansion){Expansion[Expansion.closed=0]="closed",Expansion[Expansion.opening=1]="opening",Expansion[Expansion.open=2]="open",Expansion[Expansion.closing=3]="closing"}(Expansion||(Expansion={}));class Collapsible extends Widget{oninit(node){node.state.expanded=node.attrs.isExpanded?Expansion.open:Expansion.closed,node.state.maxHeight=null,node.state.toggle=()=>{switch(node.state.expanded){case Expansion.open:case Expansion.opening:node.state.expanded=Expansion.closing,setTimeout((()=>{node.state.expanded=Expansion.closed,mithril.redraw()}),node.attrs.transition);break;case Expansion.closed:case Expansion.closing:node.state.expanded=Expansion.open}}}view(node){node.attrs.transition=node.attrs.transition||250;const components=node.children,preArrow=node.attrs.preArrow||!1,postArrow=node.attrs.postArrow||!1,maxHeight=node.state.expanded===Expansion.closed||node.state.expanded===Expansion.closing?"0":"400px",title=[components.shift()];return preArrow&&title.unshift(mithril(".hs_collapsible_pre .hs_collapsible_arrow_"+(node.state.expanded?"down":"right"))),postArrow&&title.push(mithril(".hs_collapsible_post .hs_collapsible_arrow_"+(node.state.expanded?"down":"left"))),mithril(".hs_collapsible",this.attrs(node.attrs,{class:node.state.expanded===Expansion.closed?void 0:"hs_collapsible_expanded"}),[mithril(".hs_collapsible_title",{onclick:node.state.toggle},title),mithril(".hs_collapsible_content.hs_scrolly",{style:`max-height:${maxHeight}; transition: max-height ${node.attrs.transition/1e3}s ease-in-out`},node.state.expanded===Expansion.closed?[]:components.map((c=>mithril("",c))))])}}new Log("Popup");class Popup extends Widget{constructor(){super(...arguments),this.x=0,this.y=0,this.showPopup=!1,this.content="...Popup..."}static arm(content,attrs={}){return content&&(attrs.onmouseenter=e=>Popup.instance.show(e,content),attrs.onmousemove=e=>Popup.instance.move(e),attrs.onmouseleave=()=>Popup.instance.hide(),attrs.class="popup "+(attrs.class||"")),attrs}show(e,content){this.showPopup=!0,this.content=content,this.move(e)}move(e){this.x=e.x,this.y=e.y}hide(){this.showPopup=!1}view(node){Popup.instance=this;const pos=function(w,h,x,y){let left=x,top=y,transX=50,transY=-50;2*x>w?(left+=15,transX=-100):(left-=15,transX=0);2*y>h?(top-=15,transY=-100):(top+=15,transY=0);return[left,top,transX,transY]}(window.innerWidth,window.innerHeight,this.x,this.y),style=`left:${pos[0]}px; top:${pos[1]}px; transform: translate(${pos[2]}%, ${pos[3]}%);`;return this.showPopup?mithril(".hs_popup",{style},this.content):mithril("span.hs_popup.idle")}}const EditLabel_log=new Log("EditLabel");class EditLabel extends Widget{onupdate(node){const dom=node.dom;dom&&node.state.editable&&document.activeElement!==node.dom&&(dom.value=node.children||"",dom.focus(),dom.select())}oninit(node){node.state.editable=!1,node.state.blur=e=>{node.state.editable=!1,node.attrs.update(e.target.value)},node.state.makeEditable=()=>{node.state.editable=!0},node.state.blurIfReturn=key=>{13===key.which&&key.target.blur()}}view(node){const children=node.children.join(","),html=makeHtml(""+children),content=children?mithril.trust(html):node.attrs.placeholder??"click to enter",spanAttrs=this.attrs(node.attrs,{onclick:node.state.makeEditable}),inputAttrs=this.attrs(node.attrs,{onblur:node.state.blur,onkeyup:node.state.blurIfReturn}),def=children?"":".default";return node.state.editable?mithril("input.hsedit_label",inputAttrs,""):mithril("span.hsedit_label"+def,Popup.arm(node.attrs.popup,spanAttrs),content)}}class EditDate extends EditLabel{oninit(node){super.oninit(node),node.state.update=node.attrs.update,node.attrs.update=newValue=>{if(newValue){const date=new Date(newValue),result=isNaN(date.getTime())?"invalid date":date.toDateString().slice(4);node.state.update(result)}else node.state.update(void 0)}}view(node){let content=node.children;return content&&""!==content||(content=(new Date).toDateString(),content=content.slice(4)),super.view(node)}}let convert;function makeHtml(content){return convert?convert(content):(async function(){try{EditLabel_log.info("loading showdown...");const showdown=await __webpack_require__.e(607).then(__webpack_require__.t.bind(__webpack_require__,607,3));EditLabel_log.info("showdown loaded, creating converter...");const converter=new showdown.Converter({tables:!0,ghCompatibleHeaderId:!0,smartIndentationFix:!0,takslists:!0,strikethrough:!0});convert=converter.makeHtml.bind(converter)}catch(e){EditLabel_log.warn(`converting '${content}': ${e}`)}}(),content)}const EditList_log=new Log("EditList"),defIsEmpty=row=>!row||!row.length||""===row;function expand(rows,def,isEmpty){if(rows){const lastRowIndex=rows.length-1;(lastRowIndex<0||void 0===rows[lastRowIndex]||!isEmpty(rows[lastRowIndex]))&&rows.push(def)}}class EditList extends Widget{view(node){const sort=node.attrs.sort||(()=>0),rows=node?.children,isEmpty=node.attrs.isEmpty||defIsEmpty,isExpanded=node.attrs.isExpanded||!1,render=node.attrs.rowRender||(rows=>(row,rowNum)=>row.map?row.map(((e,i)=>mithril(EditLabel,{placeholder:"add...",update:newValue=>row[i]=newValue},e))):"object"==typeof row?Object.keys(row).map((e=>mithril(EditLabel,{placeholder:"add...",update:newValue=>row[e]=newValue},row[e]))):mithril(EditLabel,{placeholder:"add...",update:newValue=>rows[rowNum]=newValue},row))(rows),def=void 0===node.attrs.defaultRow?"":node.attrs.defaultRow,expandRows=node.attrs.expand||expand,collapsible=void 0===node.attrs.collapsible||node.attrs.collapsible;rows||EditList_log.warn("EditList rows array is missing"),rows&&rows.map||EditList_log.warn("EditList rows must be an array"),expandRows(rows,def,isEmpty);const content=rows.sort(sort).map(((row,i)=>render(row,i)));return node.attrs.header&&content.unshift(mithril(".header",node.attrs.header)),collapsible?mithril(Collapsible,this.attrs(node.attrs,{class:"hs_edit_list",isExpanded}),content):mithril(".hs_edit_list",this.attrs(node.attrs,{}),content)}}new Log("EditSelect");class EditSelect extends Widget{oninit(node){node.state.selectable=!1;const i=node.children.indexOf(node.attrs.initial);node.state.selected=node.children[i>=0?i:0],node.state.select=e=>{const selection=e.currentTarget.value;node.attrs.update(selection),node.state.selected=selection,node.state.selectable=!1}}view(node){return mithril("select.hsedit_select",Popup.arm(node.attrs.popup,this.attrs(node.attrs,{onchange:node.state.select})),node.children.map((o=>node.state.selected===o?mithril("option.hsedit_select_option.selected",{value:o,selected:!0},o):mithril("option.hsedit_select_option",{value:o},o))))}}new Log("EditSelect");class EditCheckbox extends Widget{oninit(node){node.state.id=node.attrs.id||"hsCheckbox"+Math.floor(1e6*Math.random()),node.state.checked=node.attrs.initial||!1,node.state.toggleCheckbox=()=>{node.state.checked=!node.state.checked,node.attrs.update(node.state.checked)}}view(node){return mithril(".hs_edit_checkbox",this.attrs(node.attrs,{}),[mithril("input",{id:node.state.id,type:"checkbox",checked:node.state.checked,onclick:node.state.toggleCheckbox}),mithril("label",{for:node.state.id},node.children||"")])}}new Log("EditTextarea");class EditTextarea extends Widget{oninit(node){node.state.editable=!1,node.state.hasFocus=!1,node.state.update=newValue=>node.attrs.update(newValue),node.state.blur=e=>{node.state.editable=!1,node.state.hasFocus=!1;const content=e.target.value;node.state.update(content)},node.state.toggleEditable=()=>node.state.editable=!node.state.editable,node.state.adjustTextAreaHeight=dom=>{if(dom&&dom.classList){for(;!dom.classList.contains("hsedit_textarea");)dom=dom.parentElement;const scHeight=dom.scrollHeight,height=parseInt(window.getComputedStyle(dom).height),h=Math.max(height,scHeight);dom.style.height=h>0?h+"px":"auto";const listRow=dom.parentElement.parentElement;listRow.classList.contains("hsedit_list_row")&&(listRow.style.height=h>0?h+(node.state.editable?4:0)+"px":"auto")}}}onupdate(node){node.state.editable&&(node.state.hasFocus||(node.dom.value=node.children||"",node.dom.focus(),node.dom.select(),node.state.hasFocus=!0),node.state.adjustTextAreaHeight(node.dom))}view(node){const onEvent=this.attrs(node.attrs,{onclick:node.state.toggleEditable,onupdate:n=>node.state.adjustTextAreaHeight(n.dom)}),children=node.children.join(","),html=makeHtml(""+children).replace(/\n/g,"<p>"),content=children?mithril.trust(html):node.attrs.placeholder??"click to enter",def=children?"":".default";return node.state.editable?mithril("textarea.hs_edit_textarea",this.attrs(node.attrs,{wrap:"physical",onblur:node.state.blur}),content):mithril(".hs_edit_textarea"+def,node.attrs.popup?Popup.arm(node.attrs.popup,onEvent):onEvent,content)}}class Grid extends Widget{gridFormat(a){const cl=void 0===a.rows&&void 0===a.columns||void 0===a.rows?"hs_grid_col":"hs_grid_row",st=(a.gap?`gap:${a.gap};`:"")+(void 0===a.rows?"":`grid-template-rows:${a.rows};`)+(void 0===a.columns?"":`grid-template-columns:${a.columns};`);return[cl,""===st?void 0:st]}view(node){const a=node.attrs,[cl,st]=this.gridFormat(a);return mithril(".hs_grid",this.attrs({class:cl,style:st},node.attrs),node.children.map(((c,i)=>"string"==typeof c?mithril(".hs_grid_cell.child"+i,c):c)))}}class Label extends Widget{view(node){const text=node.children[0]||"";return mithril(".hs_label",this.attrs(node.attrs),mithril.trust(text))}}class OptionButtons extends EnabledWidget{setButton(buttonIndex,newValue){this.enabled&&(this.transition(buttonIndex,newValue,this.stateAccess),this.onclick(buttonIndex,newValue,this.stateAccess.map((s=>s.getValue()))))}oninit(node){const s=node.state;s.stateAccess=[],s.onclick=node.attrs.onclick,s.transition=node.attrs.transition??OptionButtons.transitions.none,s.setAccessFn=(stateful,buttonIndex)=>s.stateAccess[buttonIndex]=stateful,node.attrs.remoteSet&&node.attrs.remoteSet(((buttonIndex,newValue)=>s.setButton.bind(s)(buttonIndex,newValue)))}view(node){const s=node.state,a=node.attrs;return this.enable(!node.attrs.disable),mithril(".hs_option_buttons",this.attrs(a,{style:`grid-template-columns: repeat(${node?.children?.length??0}, 1fr);`}),node.children.map(((c,buttonIndex)=>mithril(OnOffButton,{class:"index"+buttonIndex,initial:Array.isArray(a.initial)?a.initial[buttonIndex]:a.initial===buttonIndex?1:0,onclick:newValue=>s.setButton.bind(s)(buttonIndex,newValue),stateAccess:stateful=>s.setAccessFn(stateful,buttonIndex)},c))))}}OptionButtons.transitions={none:(buttonIndex,newValue,states)=>states.map((s=>s.getValue())),radio:(buttonIndex,newValue,states)=>states.map(((s,i)=>s.setValue(i===buttonIndex?1:0)))};class RadioButtons extends OptionButtons{oninit(node){node.attrs.initial=node.attrs.initial||0,node.attrs.transition=OptionButtons.transitions.radio,super.oninit(node)}view(node){return node.attrs.class=["hs_radio_buttons",node.attrs.class].join(" "),super.view(node)}}class IconButtons extends EnabledWidget{view(node){return this.enable(!node.attrs.disable),mithril(OptionButtons,this.attrs(node.attrs,{class:"hs_icon_buttons",buttonConstraints:node.attrs.radioMode?OptionButtons.transitions.radio:OptionButtons.transitions.none,onclick:node.attrs.onclick}),node.children)}}class Menu extends RadioButtons{view(node){return node.attrs.class=[node.attrs.class||"","hs_menu"].join(" "),super.view(node)}}class MenuPanel extends Widget{oninit(node){node.state.selected=node.attrs.initial||0,node.state.change=index=>node.state.selected=index}view(node){const children=node.children;return mithril(".hs_menu_panel",[mithril(Menu,{onclick:node.state.change,initial:node.attrs.initial||0},node.attrs.menuItems||children.map(((c,i)=>i))),mithril(".hs_menu_content",children[node.state.selected])])}}class Modal extends Widget{oninit(node){node.state.showModal=!1,node.state.hide=()=>node.state.showModal=!1}view(node){return node.state.showModal=!node.attrs.showModal||node.attrs.showModal(),node.state.showModal?mithril(".hs_modal",this.attrs(node.attrs),[mithril(".hs_modal_background",{onclick:()=>{node.state.hide(),node.attrs.dismiss()}}),mithril(".hs_modal_foreground",node.children)]):mithril(".hs_no_modal")}}function none(){}function selector(selector){return null==selector?none:function(){return this.querySelector(selector)}}function array(x){return"object"==typeof x&&"length"in x?x:Array.from(x)}function empty(){return[]}function selectorAll(selector){return null==selector?empty:function(){return this.querySelectorAll(selector)}}function matcher(selector){return function(){return this.matches(selector)}}function childMatcher(selector){return function(node){return node.matches(selector)}}var find=Array.prototype.find;function childFirst(){return this.firstElementChild}var filter=Array.prototype.filter;function children(){return this.children}function sparse(update){return new Array(update.length)}function EnterNode(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}function src_constant(x){return function(){return x}}function bindIndex(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue=new Map,groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=key.call(node,node.__data__,i,group)+"",nodeByKeyValue.has(keyValue)?exit[i]=node:nodeByKeyValue.set(keyValue,node));for(i=0;i<dataLength;++i)keyValue=key.call(parent,data[i],i,data)+"",(node=nodeByKeyValue.get(keyValue))?(update[i]=node,node.__data__=data[i],nodeByKeyValue.delete(keyValue)):enter[i]=new EnterNode(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue.get(keyValues[i])===node&&(exit[i]=node)}function datum(node){return node.__data__}function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}EnterNode.prototype={constructor:EnterNode,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}};var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces.hasOwnProperty(prefix)?{space:namespaces[prefix],local:name}:name}function attrRemove(name){return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}function src_window(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleConstant(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function styleValue(node,name){return node.style.getPropertyValue(name)||src_window(node).getComputedStyle(node,null).getPropertyValue(name)}function propertyRemove(name){return function(){delete this[name]}}function propertyConstant(name,value){return function(){this[name]=value}}function propertyFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray(string){return string.trim().split(/^|\s+/)}function classList(node){return node.classList||new ClassList(node)}function ClassList(node){this._node=node,this._names=classArray(node.getAttribute("class")||"")}function classedAdd(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue(names){return function(){classedAdd(this,names)}}function classedFalse(names){return function(){classedRemove(this,names)}}function classedFunction(names,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names)}}function textRemove(){this.textContent=""}function textConstant(value){return function(){this.textContent=value}}function textFunction(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove(){this.innerHTML=""}function htmlConstant(value){return function(){this.innerHTML=value}}function htmlFunction(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function creatorInherit(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml&&document.documentElement.namespaceURI===xhtml?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator(name){var fullname=namespace(name);return(fullname.local?creatorFixed:creatorInherit)(fullname)}function constantNull(){return null}function remove(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow(){var clone=this.cloneNode(!1),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_cloneDeep(){var clone=this.cloneNode(!0),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function parseTypenames(typenames){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name}}))}function onRemove(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.options);++i?on.length=i:delete this.__on}}}function onAdd(typename,value,options){return function(){var o,on=this.__on,listener=function(listener){return function(event){listener.call(this,event,this.__data__)}}(value);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=listener,o.options=options),void(o.value=value);this.addEventListener(typename.type,listener,options),o={type:typename.type,name:typename.name,value,listener,options},on?on.push(o):this.__on=[o]}}function dispatchEvent(node,type,params){var window=src_window(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant(type,params){return function(){return dispatchEvent(this,type,params)}}function dispatchFunction(type,params){return function(){return dispatchEvent(this,type,params.apply(this,arguments))}}ClassList.prototype={add:function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(name){return this._names.indexOf(name)>=0}};var root=[null];function Selection(groups,parents){this._groups=groups,this._parents=parents}function selection(){return new Selection([[document.documentElement]],root)}Selection.prototype=selection.prototype={constructor:Selection,select:function(select){"function"!=typeof select&&(select=selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection(subgroups,this._parents)},selectAll:function(select){select="function"==typeof select?function(select){return function(){var group=select.apply(this,arguments);return null==group?[]:array(group)}}(select):selectorAll(select);for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection(subgroups,parents)},selectChild:function(match){return this.select(null==match?childFirst:function(match){return function(){return find.call(this.children,match)}}("function"==typeof match?match:childMatcher(match)))},selectChildren:function(match){return this.selectAll(null==match?children:function(match){return function(){return filter.call(this.children,match)}}("function"==typeof match?match:childMatcher(match)))},filter:function(match){"function"!=typeof match&&(match=matcher(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection(subgroups,this._parents)},data:function(value,key){if(!arguments.length)return Array.from(this,datum);var bind=key?bindKey:bindIndex,parents=this._parents,groups=this._groups;"function"!=typeof value&&(value=src_constant(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=array(value.call(parent,parent&&parent.__data__,j,parents)),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength),exitGroup=exit[j]=new Array(groupLength);bind(parent,group,enterGroup,updateGroup,exitGroup,data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection(update,parents))._enter=enter,update._exit=exit,update},enter:function(){return new Selection(this._enter||this._groups.map(sparse),this._parents)},exit:function(){return new Selection(this._exit||this._groups.map(sparse),this._parents)},join:function(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();return enter="function"==typeof onenter?onenter(enter):enter.append(onenter+""),null!=onupdate&&(update=onupdate(update)),null==onexit?exit.remove():onexit(exit),enter&&update?enter.merge(update).order():update},merge:function(selection){if(!(selection instanceof Selection))throw new Error("invalid merge");for(var groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection(merges,this._parents)},selection:function(){return this},order:function(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&4^node.compareDocumentPosition(next)&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=ascending);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection(sortgroups,this._parents).order()},call:function(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function(){let size=0;for(const node of this)++size;return size},empty:function(){return!this.node()},each:function(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function(name,value){var fullname=namespace(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS:attrRemove:"function"==typeof value?fullname.local?attrFunctionNS:attrFunction:fullname.local?attrConstantNS:attrConstant)(fullname,value))},style:function(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove:"function"==typeof value?styleFunction:styleConstant)(name,value,null==priority?"":priority)):styleValue(this.node(),name)},property:function(name,value){return arguments.length>1?this.each((null==value?propertyRemove:"function"==typeof value?propertyFunction:propertyConstant)(name,value)):this.node()[name]},classed:function(name,value){var names=classArray(name+"");if(arguments.length<2){for(var list=classList(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction:value?classedTrue:classedFalse)(names,value))},text:function(value){return arguments.length?this.each(null==value?textRemove:("function"==typeof value?textFunction:textConstant)(value)):this.node().textContent},html:function(value){return arguments.length?this.each(null==value?htmlRemove:("function"==typeof value?htmlFunction:htmlConstant)(value)):this.node().innerHTML},raise:function(){return this.each(raise)},lower:function(){return this.each(lower)},append:function(name){var create="function"==typeof name?name:creator(name);return this.select((function(){return this.appendChild(create.apply(this,arguments))}))},insert:function(name,before){var create="function"==typeof name?name:creator(name),select=null==before?constantNull:"function"==typeof before?before:selector(before);return this.select((function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)}))},remove:function(){return this.each(remove)},clone:function(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow)},datum:function(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function(typename,value,options){var i,t,typenames=parseTypenames(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd:onRemove,i=0;i<n;++i)this.each(on(typenames[i],value,options));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function(type,params){return this.each(("function"==typeof params?dispatchFunction:dispatchConstant)(type,params))},[Symbol.iterator]:function*(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&(yield node)}};const src_selection=selection;var noop={value:()=>{}};function dispatch_dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function dispatch_parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name}}))}function get(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name,value:callback}),type}Dispatch.prototype=dispatch_dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var t,_=this._,T=dispatch_parseTypenames(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};const src_dispatch=dispatch_dispatch;var taskHead,taskTail,timer_frame=0,timer_timeout=0,interval=0,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(callback,delay,time){var t=new Timer;return t.restart(callback,delay,time),t}function wake(){clockNow=(clockLast=clock.now())+clockSkew,timer_frame=timer_timeout=0;try{!function(){now(),++timer_frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(null,e),t=t._next;--timer_frame}()}finally{timer_frame=0,function(){var t0,t2,t1=taskHead,time=1/0;for(;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead=t2);taskTail=t0,sleep(time)}(),clockNow=0}}function poke(){var now=clock.now(),delay=now-clockLast;delay>1e3&&(clockSkew-=delay,clockLast=now)}function sleep(time){timer_frame||(timer_timeout&&(timer_timeout=clearTimeout(timer_timeout)),time-clockNow>24?(time<1/0&&(timer_timeout=setTimeout(wake,time-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,1e3)),timer_frame=1,setFrame(wake)))}function src_timeout(callback,delay,time){var t=new Timer;return delay=null==delay?0:+delay,t.restart((elapsed=>{t.stop(),callback(elapsed+delay)}),delay,time),t}Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now():+time)+(null==delay?0:+delay),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=callback,this._time=time,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var emptyOn=src_dispatch("start","end","cancel","interrupt"),emptyTween=[];function schedule(node,name,id,index,group,timing){var schedules=node.__transition;if(schedules){if(id in schedules)return}else node.__transition={};!function(node,id,self){var tween,schedules=node.__transition;function schedule(elapsed){self.state=1,self.timer.restart(start,self.delay,self.time),self.delay<=elapsed&&start(elapsed-self.delay)}function start(elapsed){var i,j,n,o;if(1!==self.state)return stop();for(i in schedules)if((o=schedules[i]).name===self.name){if(3===o.state)return src_timeout(start);4===o.state?(o.state=6,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),delete schedules[i]):+i<id&&(o.state=6,o.timer.stop(),o.on.call("cancel",node,node.__data__,o.index,o.group),delete schedules[i])}if(src_timeout((function(){3===self.state&&(self.state=4,self.timer.restart(tick,self.delay,self.time),tick(elapsed))})),self.state=2,self.on.call("start",node,node.__data__,self.index,self.group),2===self.state){for(self.state=3,tween=new Array(n=self.tween.length),i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=5,1),i=-1,n=tween.length;++i<n;)tween[i].call(node,t);5===self.state&&(self.on.call("end",node,node.__data__,self.index,self.group),stop())}function stop(){for(var i in self.state=6,self.timer.stop(),delete schedules[id],schedules)return;delete node.__transition}schedules[id]=self,self.timer=timer(schedule,0,self.time)}(node,id,{name,index,group,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:0})}function init(node,id){var schedule=schedule_get(node,id);if(schedule.state>0)throw new Error("too late; already scheduled");return schedule}function schedule_set(node,id){var schedule=schedule_get(node,id);if(schedule.state>3)throw new Error("too late; already running");return schedule}function schedule_get(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}function number(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}var svgNode,degrees=180/Math.PI,decompose_identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX,scaleY}}function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:number(xa,xb)},{i:i-2,x:number(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:number(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:number(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:number(xa,xb)},{i:i-2,x:number(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform((function(value){const m=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(value+"");return m.isIdentity?decompose_identity:decompose(m.a,m.b,m.c,m.d,m.e,m.f)}),"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform((function(value){return null==value?decompose_identity:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?decompose((value=value.matrix).a,value.b,value.c,value.d,value.e,value.f):decompose_identity)}),", ",")",")");function tweenRemove(id,name){var tween0,tween1;return function(){var schedule=schedule_set(this,id),tween=schedule.tween;if(tween!==tween0)for(var i=0,n=(tween1=tween0=tween).length;i<n;++i)if(tween1[i].name===name){(tween1=tween1.slice()).splice(i,1);break}schedule.tween=tween1}}function tweenFunction(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;return function(){var schedule=schedule_set(this,id),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name,value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){tween1[i]=t;break}i===n&&tween1.push(t)}schedule.tween=tween1}}function tweenValue(transition,name,value){var id=transition._id;return transition.each((function(){var schedule=schedule_set(this,id);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments)})),function(node){return schedule_get(node,id).value[name]}}function define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var brighter=1/.7,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;return format=(format+"").trim().toLowerCase(),(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn(m):3===l?new Rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===l?rgba(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===l?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function rgbConvert(o){return o instanceof Color||(o=color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}function color_rgb(r,g,b,opacity){return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}function hex(value){return((value=Math.max(0,Math.min(255,Math.round(value)||0)))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}define(Color,color,{copy:function(channels){return Object.assign(new this.constructor,this,channels)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:function(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),define(Rgb,color_rgb,extend(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),define(Hsl,(function(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)}),extend(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}));const d3_interpolate_src_constant=x=>()=>x;function linear(a,d){return function(t){return a+t*d}}function gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):d3_interpolate_src_constant(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):d3_interpolate_src_constant(isNaN(a)?b:a)}const rgb=function rgbGamma(y){var color=gamma(y);function rgb(start,end){var r=color((start=color_rgb(start)).r,(end=color_rgb(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=color_rgb(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}rgbSpline((function(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}})),rgbSpline((function(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}}));var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function string(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i,x:number(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function(b){return function(t){return b(t)+""}}(q[0].x):function(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function transition_interpolate(a,b){var c;return("number"==typeof b?number:b instanceof color?rgb:(c=color(b))?(b=c,rgb):string)(a,b)}function attr_attrRemove(name){return function(){this.removeAttribute(name)}}function attr_attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attr_attrConstant(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attr_attrConstantNS(fullname,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attr_attrFunction(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttribute(name))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttribute(name)}}function attr_attrFunctionNS(fullname,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttributeNS(fullname.space,fullname.local))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttributeNS(fullname.space,fullname.local)}}function attrInterpolate(name,i){return function(t){this.setAttribute(name,i.call(this,t))}}function attrInterpolateNS(fullname,i){return function(t){this.setAttributeNS(fullname.space,fullname.local,i.call(this,t))}}function attrTweenNS(fullname,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&attrInterpolateNS(fullname,i)),t0}return tween._value=value,tween}function attrTween(name,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&attrInterpolate(name,i)),t0}return tween._value=value,tween}function delayFunction(id,value){return function(){init(this,id).delay=+value.apply(this,arguments)}}function delayConstant(id,value){return value=+value,function(){init(this,id).delay=value}}function durationFunction(id,value){return function(){schedule_set(this,id).duration=+value.apply(this,arguments)}}function durationConstant(id,value){return value=+value,function(){schedule_set(this,id).duration=value}}function easeConstant(id,value){if("function"!=typeof value)throw new Error;return function(){schedule_set(this,id).ease=value}}function onFunction(id,name,listener){var on0,on1,sit=function(name){return(name+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(name)?init:schedule_set;return function(){var schedule=sit(this,id),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule.on=on1}}var selection_Selection=src_selection.prototype.constructor;function style_styleRemove(name){return function(){this.style.removeProperty(name)}}function styleInterpolate(name,i,priority){return function(t){this.style.setProperty(name,i.call(this,t),priority)}}function styleTween(name,value,priority){var t,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t=(i0=i)&&styleInterpolate(name,i,priority)),t}return tween._value=value,tween}function textInterpolate(i){return function(t){this.textContent=i.call(this,t)}}function textTween(value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&textInterpolate(i)),t0}return tween._value=value,tween}var id=0;function transition_Transition(groups,parents,name,id){this._groups=groups,this._parents=parents,this._name=name,this._id=id}function newId(){return++id}var selection_prototype=src_selection.prototype;transition_Transition.prototype=function(name){return src_selection().transition(name)}.prototype={constructor:transition_Transition,select:function(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode,schedule(subgroup[i],name,id,i,subgroup,schedule_get(node,id)));return new transition_Transition(subgroups,this._parents,name,id)},selectAll:function(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selectorAll(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){for(var child,children=select.call(node,node.__data__,i,group),inherit=schedule_get(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&schedule(child,name,id,k,children,inherit);subgroups.push(children),parents.push(node)}return new transition_Transition(subgroups,parents,name,id)},filter:function(match){"function"!=typeof match&&(match=matcher(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new transition_Transition(subgroups,this._parents,this._name,this._id)},merge:function(transition){if(transition._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new transition_Transition(merges,this._parents,this._name,this._id)},selection:function(){return new selection_Selection(this._groups,this._parents)},transition:function(){for(var name=this._name,id0=this._id,id1=newId(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){var inherit=schedule_get(node,id0);schedule(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}return new transition_Transition(groups,this._parents,name,id1)},call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:function(name,listener){var id=this._id;return arguments.length<2?schedule_get(this.node(),id).on.on(name):this.each(onFunction(id,name,listener))},attr:function(name,value){var fullname=namespace(name),i="transform"===fullname?interpolateTransformSvg:transition_interpolate;return this.attrTween(name,"function"==typeof value?(fullname.local?attr_attrFunctionNS:attr_attrFunction)(fullname,i,tweenValue(this,"attr."+name,value)):null==value?(fullname.local?attr_attrRemoveNS:attr_attrRemove)(fullname):(fullname.local?attr_attrConstantNS:attr_attrConstant)(fullname,i,value))},attrTween:function(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;var fullname=namespace(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value))},style:function(name,value,priority){var i="transform"==(name+="")?interpolateTransformCss:transition_interpolate;return null==value?this.styleTween(name,function(name,interpolate){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),string1=(this.style.removeProperty(name),styleValue(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate(string00=string0,string10=string1)}}(name,i)).on("end.style."+name,style_styleRemove(name)):"function"==typeof value?this.styleTween(name,function(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),value1=value(this),string1=value1+"";return null==value1&&(this.style.removeProperty(name),string1=value1=styleValue(this,name)),string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}(name,i,tweenValue(this,"style."+name,value))).each(function(id,name){var on0,on1,listener0,remove,key="style."+name,event="end."+key;return function(){var schedule=schedule_set(this,id),on=schedule.on,listener=null==schedule.value[key]?remove||(remove=style_styleRemove(name)):void 0;on===on0&&listener0===listener||(on1=(on0=on).copy()).on(event,listener0=listener),schedule.on=on1}}(this._id,name)):this.styleTween(name,function(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=styleValue(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}(name,i,value),priority).on("end.style."+name,null)},styleTween:function(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,styleTween(name,value,null==priority?"":priority))},text:function(value){return this.tween("text","function"==typeof value?function(value){return function(){var value1=value(this);this.textContent=null==value1?"":value1}}(tweenValue(this,"text",value)):function(value){return function(){this.textContent=value}}(null==value?"":value+""))},textTween:function(value){var key="text";if(arguments.length<1)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,textTween(value))},remove:function(){return this.on("end.remove",function(id){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;parent&&parent.removeChild(this)}}(this._id))},tween:function(name,value){var id=this._id;if(name+="",arguments.length<2){for(var t,tween=schedule_get(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;return null}return this.each((null==value?tweenRemove:tweenFunction)(id,name,value))},delay:function(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction:delayConstant)(id,value)):schedule_get(this.node(),id).delay},duration:function(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction:durationConstant)(id,value)):schedule_get(this.node(),id).duration},ease:function(value){var id=this._id;return arguments.length?this.each(easeConstant(id,value)):schedule_get(this.node(),id).ease},easeVarying:function(value){if("function"!=typeof value)throw new Error;return this.each(function(id,value){return function(){var v=value.apply(this,arguments);if("function"!=typeof v)throw new Error;schedule_set(this,id).ease=v}}(this._id,value))},end:function(){var on0,on1,that=this,id=that._id,size=that.size();return new Promise((function(resolve,reject){var cancel={value:reject},end={value:function(){0==--size&&resolve()}};that.each((function(){var schedule=schedule_set(this,id),on=schedule.on;on!==on0&&((on1=(on0=on).copy())._.cancel.push(cancel),on1._.interrupt.push(cancel),on1._.end.push(end)),schedule.on=on1})),0===size&&resolve()}))},[Symbol.iterator]:selection_prototype[Symbol.iterator]};var defaultTiming={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function inherit(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))throw new Error(`transition ${id} not found`);return timing}src_selection.prototype.interrupt=function(name){return this.each((function(){!function(node,name){var schedule,active,i,schedules=node.__transition,empty=!0;if(schedules){for(i in name=null==name?null:name+"",schedules)(schedule=schedules[i]).name===name?(active=schedule.state>2&&schedule.state<5,schedule.state=6,schedule.timer.stop(),schedule.on.call(active?"interrupt":"cancel",node,node.__data__,schedule.index,schedule.group),delete schedules[i]):empty=!1;empty&&delete node.__transition}}(this,name)}))},src_selection.prototype.transition=function(name){var id,timing;name instanceof transition_Transition?(id=name._id,name=name._name):(id=newId(),(timing=defaultTiming).time=now(),name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&schedule(node,name,id,i,group,timing||inherit(node,id));return new transition_Transition(groups,this._parents,name,id)};const{abs,max,min}=Math;function number1(e){return[+e[0],+e[1]]}function number2(e){return[number1(e[0]),number1(e[1])]}["w","e"].map(type),["n","s"].map(type),["n","w","e","s","nw","ne","sw","se"].map(type);function type(t){return{type:t}}function formatDecimalParts(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}var prefixExponent,re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier(specifier){this.fill=void 0===specifier.fill?" ":specifier.fill+"",this.align=void 0===specifier.align?">":specifier.align+"",this.sign=void 0===specifier.sign?"-":specifier.sign+"",this.symbol=void 0===specifier.symbol?"":specifier.symbol+"",this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":specifier.type+""}function formatRounded(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const formatTypes={"%":(x,p)=>(100*x).toFixed(p),b:x=>Math.round(x).toString(2),c:x=>x+"",d:function(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)},e:(x,p)=>x.toExponential(p),f:(x,p)=>x.toFixed(p),g:(x,p)=>x.toPrecision(p),o:x=>Math.round(x).toString(8),p:(x,p)=>formatRounded(100*x,p),r:formatRounded,s:function(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimalParts(x,Math.max(0,p+i-1))[0]},X:x=>Math.round(x).toString(16).toUpperCase(),x:x=>Math.round(x).toString(16)};function src_identity(x){return x}var defaultLocale_locale,map=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function locale(locale){var grouping,thousands,group=void 0===locale.grouping||void 0===locale.thousands?src_identity:(grouping=map.call(locale.grouping,Number),thousands=locale.thousands+"",function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}),currencyPrefix=void 0===locale.currency?"":locale.currency[0]+"",currencySuffix=void 0===locale.currency?"":locale.currency[1]+"",decimal=void 0===locale.decimal?".":locale.decimal+"",numerals=void 0===locale.numerals?src_identity:function(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(map.call(locale.numerals,String)),percent=void 0===locale.percent?"%":locale.percent+"",minus=void 0===locale.minus?"−":locale.minus+"",nan=void 0===locale.nan?"NaN":locale.nan+"";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0||1/value<0;if(value=isNaN(value)?nan:formatType(Math.abs(value),precision),trim&&(value=function(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(!+s[i])break out;i0>0&&(i0=0)}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}(value)),valueNegative&&0==+value&&"+"!==sign&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function(specifier,value){var x,f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor((x=value,((x=formatDecimalParts(Math.abs(x)))?x[1]:NaN)/3)))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}}function transform_Transform(k,x,y){this.k=k,this.x=x,this.y=y}defaultLocale_locale=locale({thousands:",",grouping:[3],currency:["$",""]}),defaultLocale_locale.format,defaultLocale_locale.formatPrefix,transform_Transform.prototype={constructor:transform_Transform,scale:function(k){return 1===k?this:new transform_Transform(this.k*k,this.x,this.y)},translate:function(x,y){return 0===x&0===y?this:new transform_Transform(this.k,this.x+this.k*x,this.y+this.k*y)},apply:function(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y]},applyX:function(x){return x*this.k+this.x},applyY:function(y){return y*this.k+this.y},invert:function(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k]},invertX:function(x){return(x-this.x)/this.k},invertY:function(y){return(y-this.y)/this.k},rescaleX:function(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x))},rescaleY:function(y){return y.copy().domain(y.range().map(this.invertY,this).map(y.invert,y))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new transform_Transform(1,0,0);transform_Transform.prototype;const Pivot_log=new Log("Pivot"),Pivot_format=locale({decimal:".",thousands:" ",grouping:[3],currency:["","TEUR"]}).format(",.0~f"),pivots={},sum=(acc,value)=>(void 0===acc?0:acc)+value,Pivot_min=(acc,value)=>Math.min(void 0===acc?1e99:acc,value),Pivot_max=(acc,value)=>Math.max(void 0===acc?-1e99:acc,value),count=(acc,value)=>((acc=acc||{})[value]=(acc[value]||0)+1,acc),unique=(acc,value)=>((acc=acc||{})[value]=1,acc),getColAccessFn=(c,header)=>{const[valColName,valueAccess]=Object.entries(c)[0],valCol=header.indexOf(valColName);valCol<0&&Pivot_log.warn(`could not find valueCol '${valColName}' in [${header.join(", ")}]`);const cs={gen:void 0,tableValueCol:valCol};if("function"==typeof valueAccess)cs.gen=valueAccess;else{const aggFn=(tableValueCol=>{try{let fn,col;switch(tableValueCol.charAt(0)){case"<":col=tableValueCol.slice(1),fn=Pivot_min;break;case">":col=tableValueCol.slice(1),fn=Pivot_max;break;case"@":col=tableValueCol.slice(1),fn=unique;break;case"#":col=tableValueCol.slice(1),fn=count;break;default:col=tableValueCol,fn=sum}return{fn,name:col}}catch(e){Pivot_log.error(e)}})(valueAccess),pivotCol=header.indexOf(aggFn.name);cs.gen=(aggregators,value,col,rowData)=>{try{const pivotValue=pivotCol<0?aggFn.name:rowData[pivotCol];return aggregators[pivotValue]=aggFn.fn(aggregators[pivotValue],value,col,rowData),aggregators}catch(e){Pivot_log.error(e)}}}return cs};function createPivot(table,header,by,columns){const createColumns=(rowName,table,byRows,colsAccess)=>{const byRow=byRows.shift(),values=function(table,byRow,colsAccess){const result={cols:{},rows:{}};return table.forEach((rowData=>{const rowName=rowData[byRow];result.rows[rowName]=result.rows[rowName]||{cols:{},rows:{}},colsAccess.map((colAccess=>colAccess.gen(result.cols,rowData[colAccess.tableValueCol],colAccess.tableValueCol,rowData)))})),result}(table,byRow,colsAccess),rows=Object.keys(values.rows);return{name:rowName,values,tree:0===rows.length?void 0:rows.sort().map((by=>by&&"undefined"!==by?createColumns(by,table.filter((by=>row=>row[byRow]===by)(by)),byRows.slice(),colsAccess):void 0))}},colsAccess=columns.map((c=>getColAccessFn(c,header))),byRows=by.map((c=>header.indexOf(c)));return 0===table.length||0===header.length?void 0:createColumns("&nbsp;",table,byRows.slice(),colsAccess)}const makeRow=(pivot,level,colSequence)=>{const values=pivot.values,parts=values?colSequence.map((c=>{let val=values.cols[c];return val=void 0===val?"":"object"!=typeof val?val:Object.keys(val).reduce(((acc,v)=>"string"==typeof val[v]?""+(acc||val[v]):(acc||0)+val[v]),void 0),mithril("span.hs_right","number"==typeof val?Pivot_format(val):val)})):[];return parts.unshift(mithril("span.name",mithril.trust(pivot.name))),mithril(".row",parts)},showByColumns=(pivot,level,colSequence,expanded=!1)=>mithril(Collapsible,{class:"pivot_row mon"+level,isExpanded:expanded},[makeRow(pivot,0,colSequence),...pivot.tree.sort(((a,b)=>a.name>b.name?1:a.name<b.name?-1:0)).map((p=>p?showByColumns(p,level+1,colSequence,!1):void 0))]);class Pivot extends Widget{oninit(node){node.state.id=Math.floor(1e5*Math.random()),node.state.pivot=pivots[node.state.id]=pivots[node.state.id]||createPivot(node.attrs.table.data,node.attrs.table.header,node.attrs.by,node.attrs.columns);const[oldHeaders,newHeaders]=function(pivot,pivotHeader){const oldHeaders=[],newHeaders=[];return pivotHeader?pivotHeader.map(((key,ni)=>{if("object"==typeof key){const oldKey=Object.keys(key)[0];oldHeaders[ni]=oldKey,newHeaders[ni]=key[oldKey]}else oldHeaders[ni]=newHeaders[ni]=key})):Object.keys(pivot.values.cols).map(((key,ni)=>oldHeaders[ni]=newHeaders[ni]=key)),[oldHeaders,newHeaders]}(node.state.pivot,node.attrs.pivotHeader);node.state.oldHeaders=oldHeaders,node.state.newHeaders=newHeaders.map((h=>mithril("span.hs_right",h)))}view(node){return mithril(".hs_pivot",this.attrs(node.attrs,{}),[mithril(".row.mon_header",[mithril("span.name",node.attrs.pivotName),...node.state.newHeaders]),showByColumns(node.state.pivot,0,node.state.oldHeaders,!0)])}}class Slider{oninit(node){node.state.range=[],node.state.value=.5,node.state.mouse=-1,node.state.slider=0,node.state.notified="",node.state.onchange=()=>{}}view(node){const id=node.attrs.id,css=node.attrs.css||"";return node.state.range=node.attrs.range||[],node.state.onchange=node.attrs.onchange,mithril(".hs_slider "+css,{id,onmousedown:e=>function(e,node){const offset=function(e){let target=e.target,leftOffset=0;for(;target.className.trim()!==e.currentTarget.className.trim();)leftOffset+=target.offsetLeft,target=target.parentNode;return leftOffset-target.lastChild.offsetLeft}(e);if(node.state.mouse=e.clientX,["hs_slider","hs_slider_slot"].indexOf(e.target.className.trim())>=0){const slotWidth=e.currentTarget.lastChild.clientWidth,handleWidth=e.currentTarget.lastChild.lastChild.clientWidth;node.state.mouse-=handleWidth/2,node.state.value=(e.offsetX-handleWidth/2+offset)/slotWidth}node.state.slider=node.state.value,getValue(e,node)}(e,node),onmousemove:e=>function(e,node){node.state.mouse>0&&(getValue(e,node),(node.state.value>1||node.state.value<0)&&mouseup(e,node))}(e,node),onmouseup:e=>mouseup(e,node),onmouseout:e=>function(e,node){node.state.mouse>0&&"hs_slider"===e.target.className.trim()&&mouseup(e,node)}(e,node)},[renderSlider(node)])}}function renderSlider(node){return mithril(".hs_slider_slot",[mithril(".hs_slider_markers",node.state.range.map(renderMarker)),mithril(".hs_slider_handle",{style:`left:${100*node.state.value}%`})])}function renderMarker(value,i,markers){const share=i/(markers.length-1),left=markers.length<2?0:100*share;return mithril(".hs_slider_marker",{style:`left: ${left}%`},function(value){return mithril(".hs_slider_label",value)}(value))}function getValue(e,node){e.stopPropagation(),e.preventDefault();const slotWidth=e.currentTarget.lastChild.clientWidth;return node.state.value=(e.clientX-node.state.mouse)/slotWidth+node.state.slider,function(node){if(node.state.range.length>1&&"string"==typeof node.state.range[0]){const v=Math.floor(node.state.value*(node.state.range.length-1)+.5);return node.state.notified!==node.state.range[v]&&(node.state.onchange(node.state.range[v]),node.state.notified=node.state.range[v]),v/(node.state.range.length-1)}{const numRange=node.state.range,v=Math.floor(100*(numRange[0]*(1-node.state.value)+numRange[1]*node.state.value))/100;return node.state.onchange(Math.min(node.state.range[1],Math.max(node.state.range[0],v))),node.state.value}}(node)}function mouseup(e,node){node.state.mouse>0&&(node.state.value=getValue(e,node),node.state.mouse=-1)}const ButtonSymbols={cross:{sym:"&times;"},minus:{sym:"&minus;"},plus:{sym:"+"},dLeft:{sym:"&laquo;"},dRight:{sym:"&raquo;"},left:{sym:"&lsaquo;"},right:{sym:"&rsaquo;"},leftTri:{sym:"&ltrif;"},rightTri:{sym:"&rtrif;"},upTri:{sym:"&utrif;"},downTri:{sym:"&dtrif;"},up:{sym:"&and;"},down:{sym:"&or;"},lArrow:{sym:"&larr;"},rArrow:{sym:"&rarr;"},uArrow:{sym:"&uarr;"},dArrow:{sym:"&darr;"},empty:{sym:"&#9675;"},emptySlash:{sym:"&empty;"},oSlash:{sym:"&oslash;"},o:{sym:"&omicron;"},lines3:{sym:"&equiv;"},sum:{sym:"&Sigma;"},ellipsis:{sym:"&hellip;"},vertEllips:{sym:"&#8285;"},bullet:{sym:"&bull;"},enter:{sym:"&crarr;"},again:{sym:"&#8635;"},start:{sym:"&#8689;"},end:{sym:"&#8690;"}};class ToolbarButton{static getSymbol(name){return ButtonSymbols[name]?ButtonSymbols[name].sym:""}view(node){return"string"==typeof node.attrs.symbols?mithril(".hs_corner_button",{onclick:node.attrs.onclick},mithril.trust(node.attrs.symbols)):mithril(".hs_corner_button",{onclick:node.attrs.onclick},node.attrs.symbols.map((sym=>mithril.trust(sym))))}}const TypeAhead_log=new Log("TypeAhead");class GetList{constructor(map){this.map=map,this.list=[]}search(list){"string"==typeof list?this.url!==list&&(this.url=list,mithril.request({method:"GET",url:list}).then((data=>this.captureList(data,this.map))).catch((e=>TypeAhead_log.warn(`requesting ${list}: ${e.toString()}`)))):this.captureList(list,this.map)}captureList(list,map){this.list=map?map(list):list}}class TypeAhead{constructor(){this.gl=new GetList}oninit(node){node.state.inputNode="",node.state.hidePopdown=!0,node.state.value="",node.state.typeAheadList=[],node.state.onsubmit=node.attrs.onsubmit,node.state.autocomplete=void 0===node.attrs.autocomplete||node.attrs.autocomplete}view(node){this.gl.search(node.attrs.list);const nosubmit=()=>TypeAhead_log.warn("no submit function defined"),getList=typed=>node.state.typeAheadList=this.gl.list.filter((l=>l.match(new RegExp(typed,"gi")))),submit=v=>(node.state.inputNode.setSelectionRange(0,node.state.inputNode.value.length),node.state.hidePopdown=!0,(node.state.onsubmit||nosubmit)(v,node.state.typeAheadList)),select=e=>{if(e){const selected=e.target.attributes.name.value;node.state.inputNode.value=selected,node.state.typeAheadList=getList(selected),submit(selected)}},selector=node.state.value?".hs_typeahead_value":".hs_typeahead_placeholder";return mithril(".hs_form",[mithril("input.hs_typeahead_input"+selector,{contenteditable:!0,placeholder:node.attrs.placeholder,autofocus:node.attrs.autofocus||!0,onkeydown:e=>{const n=node.state.inputNode=e.target;if(node.state.hidePopdown=!1,"Enter"===e.code)submit(n.value);else if("Escape"===e.code)node.state.hidePopdown=!0;else if("Backspace"===e.code&&n.textLength>0){const input=n.textContent;input.length>0&&(n.value=input.slice(0))}},oninput:e=>{const n=node.state.inputNode=e.target,typed=node.state.value=n.value;typed.length>0&&(node.state.typeAheadList=getList(typed),node.state.autocomplete&&function(typed,node){const n=node.state.inputNode,startOfLineInput=new RegExp("^"+typed,"gi");n.value=node.state.typeAheadList.filter((l=>l.match(startOfLineInput)))[0]||typed,n.setSelectionRange(typed.length,n.value.length)}(typed,node))}},mithril.trust(node.state.value?node.state.value:node.attrs.placeholder)),node.state.hidePopdown?void 0:mithril(".hs_typeahead_list",node.state.typeAheadList.map((l=>mithril("",{onclick:select},function(item,match){const re=new RegExp(match,"gi"),decorations=item.replace(re,(m=>`<b>${m}</b>`)).split("<").map((s=>s.startsWith("/b>")?mithril("span",{name:item},s.slice(3)):s.startsWith("b>")?mithril("b",{name:item},s.slice(2)):mithril("span",{name:item},s)));return mithril("span",decorations)}(l,node.state.value)))))])}}const Router_log=new Log("Router");class Router{constructor(viewComponent,routePattern,defaults){this.routePattern=routePattern,this.defaults=defaults,this.lastAttrs={},this.setParts({}),setTimeout((()=>this.route(viewComponent,routePattern)))}setRoute(attrs){attrs=this.setParts(attrs),mithril.route.set(this.routePattern,attrs)}redraw(){mithril.redraw()}setParts(attrs){return Object.entries(this.defaults).map((([attr,def])=>{void 0===attrs[attr]&&(attrs[attr]=this.lastAttrs[attr]),this.lastAttrs[attr]=attrs[attr]||this.lastAttrs[attr]||def})),this.lastAttrs}getParts(){return this.lastAttrs}route(viewComponent,routePattern){const parts=routePattern.split(":"),routes={};let path="";for(const part of parts)path+=(""===path?"":":")+part,routes[path]=viewComponent,Router_log.info(`added route '${path}'`);mithril.route(document.body,"/",routes)}}},417:module=>{module.exports=function(){return this.crypto}()}},__webpack_module_cache__={};function __webpack_require__(moduleId){if(__webpack_module_cache__[moduleId])return __webpack_module_cache__[moduleId].exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.exports}return __webpack_require__.m=__webpack_modules__,__webpack_require__.t=function(value,mode){if(1&mode&&(value=this(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);var def={};if(2&mode&&"object"==typeof value&&value)for(const key in value)def[key]=()=>value[key];return def.default=()=>value,__webpack_require__.d(ns,def),ns},__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.f={},__webpack_require__.e=chunkId=>Promise.all(Object.keys(__webpack_require__.f).reduce(((promises,key)=>(__webpack_require__.f[key](chunkId,promises),promises)),[])),__webpack_require__.u=chunkId=>chunkId+".hsWidget.min.js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),inProgress={},__webpack_require__.l=(url,done,key)=>{if(inProgress[url])inProgress[url].push(done);else{var script,needAttach;if(void 0!==key)for(var scripts=document.getElementsByTagName("script"),i=0;i<scripts.length;i++){var s=scripts[i];if(s.getAttribute("src")==url||s.getAttribute("data-webpack")=="hsWidget:"+key){script=s;break}}script||(needAttach=!0,(script=document.createElement("script")).charset="utf-8",script.timeout=120,__webpack_require__.nc&&script.setAttribute("nonce",__webpack_require__.nc),script.setAttribute("data-webpack","hsWidget:"+key),script.src=url),inProgress[url]=[done];var onScriptComplete=(prev,event)=>{script.onerror=script.onload=null,clearTimeout(timeout);var doneFns=inProgress[url];if(delete inProgress[url],script.parentNode&&script.parentNode.removeChild(script),doneFns&&doneFns.forEach((fn=>fn(event))),prev)return prev(event)},timeout=setTimeout(onScriptComplete.bind(null,void 0,{type:"timeout",target:script}),12e4);script.onerror=onScriptComplete.bind(null,script.onerror),script.onload=onScriptComplete.bind(null,script.onload),needAttach&&document.head.appendChild(script)}},__webpack_require__.r=exports=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},(()=>{var scriptUrl;__webpack_require__.g.importScripts&&(scriptUrl=__webpack_require__.g.location+"");var document=__webpack_require__.g.document;if(!scriptUrl&&document&&(document.currentScript&&(scriptUrl=document.currentScript.src),!scriptUrl)){var scripts=document.getElementsByTagName("script");scripts.length&&(scriptUrl=scripts[scripts.length-1].src)}if(!scriptUrl)throw new Error("Automatic publicPath is not supported in this browser");scriptUrl=scriptUrl.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=scriptUrl})(),(()=>{var installedChunks={179:0};__webpack_require__.f.j=(chunkId,promises)=>{var installedChunkData=__webpack_require__.o(installedChunks,chunkId)?installedChunks[chunkId]:void 0;if(0!==installedChunkData)if(installedChunkData)promises.push(installedChunkData[2]);else{var promise=new Promise(((resolve,reject)=>{installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var url=__webpack_require__.p+__webpack_require__.u(chunkId),error=new Error;__webpack_require__.l(url,(event=>{if(__webpack_require__.o(installedChunks,chunkId)&&(0!==(installedChunkData=installedChunks[chunkId])&&(installedChunks[chunkId]=void 0),installedChunkData)){var errorType=event&&("load"===event.type?"missing":event.type),realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")",error.name="ChunkLoadError",error.type=errorType,error.request=realSrc,installedChunkData[1](error)}}),"chunk-"+chunkId)}};var chunkLoadingGlobal=self.webpackChunkhsWidget=self.webpackChunkhsWidget||[],parentChunkLoadingFunction=chunkLoadingGlobal.push.bind(chunkLoadingGlobal);chunkLoadingGlobal.push=data=>{for(var moduleId,chunkId,[chunkIds,moreModules,runtime]=data,i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],__webpack_require__.o(installedChunks,chunkId)&&installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)__webpack_require__.o(moreModules,moduleId)&&(__webpack_require__.m[moduleId]=moreModules[moduleId]);for(runtime&&runtime(__webpack_require__),parentChunkLoadingFunction(data);resolves.length;)resolves.shift()()}})(),__webpack_require__(844)})();